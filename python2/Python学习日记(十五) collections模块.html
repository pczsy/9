<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python学习日记(十五) collections模块' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python学习日记(十五) collections模块</center></div><div class='banquan'>原文出处:本文由博客园博主Fantac提供。<br/>
原文连接:https://www.cnblogs.com/Fantac/p/11421703.html</div><br>
    <p><span style="font-family: 宋体; font-size: 18px;">在内置函数(dict、list、set、tuple)的基础上,collections模块还提供了几个其他的数据类型:Counter、deque、defaultdict、namedtuple和OrdereDict等</span></p>
<p><span style="font-family: 幼圆; font-size: 18pt; color: #ffffff; background-color: #ff0000;"><strong>1.namedtuple</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>作用:</strong><span style="text-decoration: underline;">用于生成一个可以使用名字访问元素内容的tuple</span></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">如果要表示一个点,我们可以这样表示,但是在使用时我们很难看出这个tuple是用来表示一个坐标</span></p>
<div class="cnblogs_code">
<pre><code>p = (1,2)</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">因此我们调用namedtuple来解决这个问题</span></p>
<p><strong><span style="font-family: 宋体;"><span style="font-size: 18px;">表示二维中的一个点:</span></span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> collections
Point </span>= collections.namedtuple(<span style="color: #800000;">'</span><span style="color: #800000;">Point</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">x</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">y</span><span style="color: #800000;">'</span><span style="color: #000000;">])
</span><span style="color: #0000ff;">print</span>(Point)        <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class '__main__.Point'&gt;</span>
p = Point(1,2<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(p.x)          <span style="color: #008000;">#</span><span style="color: #008000;">1</span>
<span style="color: #0000ff;">print</span>(p.y)          <span style="color: #008000;">#</span><span style="color: #008000;">2</span>
<span style="color: #0000ff;">print</span>(p)            <span style="color: #008000;">#</span><span style="color: #008000;">Point(x=1, y=2)</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>表示三维中的一个点:</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> collections
Point </span>= collections.namedtuple(<span style="color: #800000;">'</span><span style="color: #800000;">Point</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">x</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">y</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">z</span><span style="color: #800000;">'</span><span style="color: #000000;">])
</span><span style="color: #0000ff;">print</span>(Point)        <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class '__main__.Point'&gt;</span>
p = Point(1,2,3<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(p.x)          <span style="color: #008000;">#</span><span style="color: #008000;">1</span>
<span style="color: #0000ff;">print</span>(p.y)          <span style="color: #008000;">#</span><span style="color: #008000;">2</span>
<span style="color: #0000ff;">print</span>(p.z)          <span style="color: #008000;">#</span><span style="color: #008000;">3</span>
<span style="color: #0000ff;">print</span>(p)            <span style="color: #008000;">#</span><span style="color: #008000;">Point(x=1, y=2, z=3)</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>表示一个圆的属性:</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> collections
Circle </span>= collections.namedtuple(<span style="color: #800000;">'</span><span style="color: #800000;">Circle</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">r</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">d</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">s</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">l</span><span style="color: #800000;">'</span>])</pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>表示一张扑克牌:</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> collections
Card </span>= collections.namedtuple(<span style="color: #800000;">'</span><span style="color: #800000;">card</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">c_class</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">c_num</span><span style="color: #800000;">'</span><span style="color: #000000;">])
c </span>= Card(<span style="color: #800000;">'</span><span style="color: #800000;">方块</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">4</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(c.c_class)            <span style="color: #008000;">#</span><span style="color: #008000;">方块</span>
<span style="color: #0000ff;">print</span>(c.c_num)              <span style="color: #008000;">#</span><span style="color: #008000;">4        </span>
<span style="color: #0000ff;">print</span>(c)                    <span style="color: #008000;">#</span><span style="color: #008000;">card(c_class='方块', c_num='4')</span></pre>
</div>
<p><strong><span style="background-color: #ff0000; color: #ffffff; font-family: 幼圆; font-size: 18pt;">2.deque()</span></strong></p>
<p><strong><span style="background-color: #ffffff; color: #000000; font-family: 宋体; font-size: 18px;">这里先说一个队列quque()</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>队列的特性:先进先出(FIFO)</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> queue
i </span>= 1<span style="color: #000000;">
q </span>=<span style="color: #000000;"> queue.Queue()
q.put(</span>5<span style="color: #000000;">)
q.put(</span>6<span style="color: #000000;">)
q.put(</span>-5<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(q)          <span style="color: #008000;">#</span><span style="color: #008000;">&lt;queue.Queue object at 0x0000000002082EB8&gt;</span>
<span style="color: #0000ff;">print</span>(q.qsize())  <span style="color: #008000;">#</span><span style="color: #008000;">3    整个队列长度为3</span>
<span style="color: #0000ff;">print</span>(q.get())    <span style="color: #008000;">#</span><span style="color: #008000;">5</span>
<span style="color: #0000ff;">print</span>(q.get())    <span style="color: #008000;">#</span><span style="color: #008000;">6</span>
<span style="color: #0000ff;">print</span>(q.get())    <span style="color: #008000;">#</span><span style="color: #008000;">-5</span>
<span style="color: #0000ff;">print</span>(q.get())    <span style="color: #008000;">#</span><span style="color: #008000;">阻塞 因为整个队列只有3个元素,当3个元素全部取出后就再也取不出新的元素,程序就会一直等待用户给它一个值</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong>deque()双端队列,两边的头都可以取和存</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> collections <span style="color: #0000ff;">import</span><span style="color: #000000;"> deque
dq </span>= deque([5,6<span style="color: #000000;">])
dq.append(</span><span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>)              <span style="color: #008000;">#</span><span style="color: #008000;">从后面放数据</span>
dq.appendleft(<span style="color: #800000;">'</span><span style="color: #800000;">b</span><span style="color: #800000;">'</span>)          <span style="color: #008000;">#</span><span style="color: #008000;">从前面放数据</span>
dq.insert(1,<span style="color: #800000;">'</span><span style="color: #800000;">c</span><span style="color: #800000;">'</span>)            <span style="color: #008000;">#</span><span style="color: #008000;">在1这个索引下加入'c'，原位置下的元素往后移一位</span>
<span style="color: #0000ff;">print</span>(dq)                   <span style="color: #008000;">#</span><span style="color: #008000;">deque(['b', 'c', 5, 6, 'a'])</span>
<span style="color: #0000ff;">print</span>(dq.pop())             <span style="color: #008000;">#</span><span style="color: #008000;">a      向后弹出一个元素'a'</span>
<span style="color: #0000ff;">print</span>(dq.popleft())         <span style="color: #008000;">#</span><span style="color: #008000;">b      向前弹出一个元素'b'</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">运用队列的好处在于能够高效插入和删除操作的双向列表,适合用于队列和栈</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">而我们使用list,虽然访问元素速度很快但是我们要插入或删除一个元素就会慢很多,数据量大的时候后,插入和删除效率也会很低</span></p>
<p><span style="font-family: 幼圆; font-size: 18pt; color: #ffffff; background-color: #ff0000;"><strong>3.OrderedDict()</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">当我们在操作字典时,我们无法确定自己的key的顺序,如果我们要保持这一顺序我们就可以使用有序字典OrderedDict()这一个方法</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> collections <span style="color: #0000ff;">import</span><span style="color: #000000;"> OrderedDict
od </span>= OrderedDict([(<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>,1),(<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span>,2),(<span style="color: #800000;">'</span><span style="color: #800000;">k3</span><span style="color: #800000;">'</span>,3<span style="color: #000000;">)])
</span><span style="color: #0000ff;">print</span>(od)       <span style="color: #008000;">#</span><span style="color: #008000;">OrderedDict([('k1', 1), ('k2', 2), ('k3', 3)])</span>
<span style="color: #0000ff;">print</span>(od[<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>]) <span style="color: #008000;">#</span><span style="color: #008000;">1</span>
<span style="color: #0000ff;">for</span> k <span style="color: #0000ff;">in</span><span style="color: #000000;"> od:
    </span><span style="color: #0000ff;">print</span>(k)    <span style="color: #008000;">#</span><span style="color: #008000;">k1</span>
                <span style="color: #008000;">#</span><span style="color: #008000;">k2</span>
                <span style="color: #008000;">#</span><span style="color: #008000;">k3</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">ps:存储一个列表或字典时,字典往往会比列表更占内存</span></p>
<p><strong><span style="font-family: 幼圆; font-size: 18pt; background-color: #ff0000; color: #ffffff;">4.defaultdict()</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px; background-color: #ffffff; color: #000000;">给字典通过一个没有参数的匿名函数设置一个默认值</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> collections <span style="color: #0000ff;">import</span><span style="color: #000000;"> defaultdict
d </span>= defaultdict(<span style="color: #0000ff;">lambda</span> : 5<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(d[<span style="color: #800000;">'</span><span style="color: #800000;">k</span><span style="color: #800000;">'</span>])   <span style="color: #008000;">#</span><span style="color: #008000;">5</span>
<span style="color: #0000ff;">print</span>(d[<span style="color: #800000;">'</span><span style="color: #800000;">v</span><span style="color: #800000;">'</span>])   <span style="color: #008000;">#</span><span style="color: #008000;">5</span>
<span style="color: #0000ff;">print</span>(d[<span style="color: #800000;">'</span><span style="color: #800000;">b</span><span style="color: #800000;">'</span>])   <span style="color: #008000;">#</span><span style="color: #008000;">5</span>
<span style="color: #0000ff;">print</span>(d)        <span style="color: #008000;">#</span><span style="color: #008000;">defaultdict(&lt;function &lt;lambda&gt; at 0x0000000002158730&gt;, {'k': 5, 'v': 5, 'b': 5})</span></pre>
</div>
<p><span style="font-size: 18pt;"><strong><span style="background-color: #ff0000; color: #ffffff; font-family: 幼圆;">5.Counter()</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">功能主要是跟踪值出现的次数,它是一个无序的容器,以键值对的形式储存,其中元素为key,其计数作为value,计数值可以是任意的int(包括负数和0),Counter类和其他语言的bags或multisets很相似</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> collections <span style="color: #0000ff;">import</span><span style="color: #000000;"> Counter
ret </span>= Counter(<span style="color: #800000;">'</span><span style="color: #800000;">avbb223</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(ret)      <span style="color: #008000;">#</span><span style="color: #008000;">Counter({'b': 2, '2': 2, 'a': 1, 'v': 1, '3': 1})</span></pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>