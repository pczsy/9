<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修异常处理，常用字符串方法，selenium模块' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>异常处理，常用字符串方法，selenium模块</center></div><div class='banquan'>原文出处:本文由博客园博主SetCreed提供。<br/>
原文连接:https://www.cnblogs.com/setcreed/p/11432056.html</div><br>
    <h1 id="异常处理">异常处理</h1>
<p>什么是异常处理 (处理异常，报错error)</p>
<pre><code><code>print(1 / 0)  # 报了0除错误

# 打印结果：
Traceback (most recent call last):
  File &quot;D:/pycharm_project/day07/01异常处理.py&quot;, line 18, in &lt;module&gt;
    print(1 / 0)
ZeroDivisionError: division by zero</code></pre>
<p>捕捉异常</p>
<pre><code><code>try:
    print(1 / 0)   # 有错误就跳过，没错误就执行
except ZeroDivisionError:  # 错误被捕捉了
    pass   # 啥也不做
print(1)</code></pre>
<p>这种方法只能捕捉这个指定错误, 当然也有其他错误</p>
<pre><code><code>try:
    print(x)
    print(1 / 0)   # 有错误就跳过，没错误就执行
except ZeroDivisionError:  # 错误被捕捉了
    pass   # 啥也不做
except NameError:
    pass
print(1)</code></pre>
<p>这样很麻烦，异常有很多种</p>
<pre><code><code>try:
    print(&#39;--------&#39;)
    print(a)
except Exception as e:   # 把错误信息输入出来，同时一般把错误信息记录到日志
    print(e)

print(&#39;--------&#39;)

# 打印结果：
--------
name &#39;a&#39; is not defined
--------</code></pre>
<p>这样就用Exception 就能自动识别错误，很方便~</p>
<h1 id="字符串常用方法">字符串常用方法</h1>
<h2 id="索引取值">索引取值</h2>
<pre><code><code>s = &#39;hello&#39;
print(s[0])  # 取到h</code></pre>
<h2 id="切片">切片</h2>
<pre><code><code>s = &#39;hello world&#39;
print(s[0:5])  # 取到hello</code></pre>
<h2 id="成员运算">成员运算</h2>
<pre><code><code>s = &#39;hello&#39;
print(&#39;h&#39; in s)   # 打印True</code></pre>
<h2 id="for循环">for循环</h2>
<pre><code><code>s = &#39;hello&#39;
for i in s:
    print(i)
    
# 打印：
h
e
l
l
o</code></pre>
<h2 id="字符串长度">字符串长度</h2>
<pre><code><code>s = &#39;hello&#39;
print(len(s))  # 打印字符串长度 5</code></pre>
<h2 id="strip">strip()</h2>
<pre><code><code>s = &#39;** hello  &#39;
print(s.strip())  # 默认去掉两端空格
print(s.strip(&#39;*&#39;))  # 去掉*
print(s.strip(&#39;* h&#39;))  # 去掉* h</code></pre>
<h2 id="l.strip-和-r.strip">l.strip() 和 r.strip()</h2>
<pre><code><code>s = &#39;**cwz**&#39;
print(s.lstrip(&#39;*&#39;))  # 去掉左边*
print(s.rstrip(&#39;*&#39;))  # 去掉右边*</code></pre>
<h2 id="startswith和endswith">startswith()和endswith()</h2>
<pre><code><code>s = &#39;hello&#39;
print(s.startswith(&#39;h&#39;))   # True
print(s.endswith(&#39;o&#39;))     # True</code></pre>
<h2 id="find-寻找索引位置">find() 寻找索引位置</h2>
<pre><code><code>s = &#39;hello&#39;
print(s.find(&#39;h&#39;))  # 打印0
print(s.find(&#39;x&#39;))  # 字符串中没有的返回-1
print(s.find(&#39;l&#39;))  # 字符串中有相同的，找第一个  返回2</code></pre>
<h2 id="index-索引位置">index() 索引位置</h2>
<pre><code><code>s = &#39;hello&#39;
print(s.index(&#39;o&#39;))  # 打印4
print(s.index(&#39;a&#39;))  # 字符串中没有的直接报错</code></pre>
<h2 id="join-把列表中元素拼接起来">join() 把列表中元素拼接起来</h2>
<pre><code><code>lt = [&#39;a&#39;,&#39;b&#39;,&#39;c&#39;]
print(&#39;*&#39;.join(lt))

# 打印结果：
a*b*c</code></pre>
<h2 id="split-切割">split() 切割</h2>
<pre><code><code>s = &#39;a*b*c&#39;
print(s.split(&#39;*&#39;))  # 以*切割

# 打印结果：
[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]</code></pre>
<h2 id="replace-替换">replace 替换</h2>
<pre><code><code>s = &#39;reese neo&#39;
print(s.replace(&#39;reese&#39;,&#39;cwz&#39;))

# 打印结果：
cwz neo</code></pre>
<h2 id="centerljustrjust-居中居左居右">center/ljust/rjust 居中/居左/居右</h2>
<pre><code><code>s = &#39;hello&#39;
print(s.center(20,&#39;-&#39;))
print(s.ljust(20,&#39;-&#39;))
print(s.rjust(20,&#39;-&#39;))

# 打印结果：
-------hello--------
hello---------------
---------------hello</code></pre>
<h2 id="isdigit-和-isalpha">isdigit() 和 isalpha()</h2>
<pre><code><code>s = &#39;123&#39;
print(s.isdigit())  # 判断是否全为数字  True
print(s.isalpha())  # 判断是否全为字母  Flase</code></pre>
<h2 id="count-计数">count 计数</h2>
<pre><code><code>s = &#39;aabcda&#39;
print(s.count(&#39;a&#39;))  # 打印3</code></pre>
<h1 id="selenium模块">selenium模块</h1>
<h2 id="什么是selenium">什么是selenium</h2>
<p>selenium是一个自动化测试工具</p>
<h2 id="为什么要用selenium">为什么要用selenium</h2>
<ul>
<li>通过selenium可以驱动浏览器，跳过登录滑动验证</li>
<li>缺点是爬虫效率低下</li>
</ul>
<h2 id="怎么使用selenium">怎么使用selenium</h2>
<ul>
<li>安装驱动chromedriver <a href="http://npm.taobao.org/mirrors/chromedriver/" class="uri">http://npm.taobao.org/mirrors/chromedriver/</a></li>
<li>安装selenium pip3 install selenium</li>
</ul>
<h3 id="selenium基本使用">selenium基本使用</h3>
<pre><code><code>from selenium import webdriver  # 用来驱动浏览器
import time

# webdriver.Chrome(&#39;驱动绝对路径&#39;)
driver = webdriver.Chrome(r&#39;E:\chromedriver_win32\chromedriver.exe&#39;)
driver.get(&#39;https://www.baidu.com&#39;)

time.sleep(10)  # 等待10s

driver.close()  # 关闭驱动
</code></pre>
<h3 id="selenium驱动浏览器输入">selenium驱动浏览器输入</h3>
<pre><code><code>from selenium import webdriver
import time

try:
    driver = webdriver.Chrome(r&#39;E:\chromedriver_win32\chromedriver.exe&#39;)
    driver.get(&#39;https://www.baidu.com&#39;)  # 打开百度
    
    # 通过id查找输入框
    input_tag = driver.find_element_by_id(&#39;kw&#39;)
    input_tag.send_keys(&#39;四驱车&#39;)  # 输入查找内容
    
    # 通过id查找百度一下按钮
    submit_button = driver.find_element_by_id(&#39;kw&#39;)
    submit_button.click()  # 点击百度一下按钮
    
    time.sleep(10)
    
finally:    # 无论有没有异常，都会执行下面的代码，关闭驱动
    driver.close()   # 关闭驱动</code></pre>
<h3 id="selenium模拟登录">selenium模拟登录</h3>
<pre><code><code>from selenium import webdriver
import time
from selenium.webdriver.common.keys import Keys  # 键盘按键操作

driver = webdriver.Chrome(r&#39;E:\chromedriver_win32\chromedriver.exe&#39;)

try:
    driver.implicitly_wait(10)  # 等待浏览器加载数据10s
    driver.get(&#39;https://leetcode-cn.com/&#39;)

    # 通过文本查找登录按钮
    login_button = driver.find_element_by_link_text(&#39;登录&#39;)
    login_button.click()

    # 通过class查找用户名输入框
    username = driver.find_element_by_class_name(&#39;css-paawy7-BasicInput&#39;)
    username.send_keys(&#39;123456789@qq.com&#39;)

    # 通过name查找密码输入框
    password = driver.find_element_by_name(&#39;password&#39;)
    password.send_keys(&#39;123456&#39;)

    password.send_keys(Keys.ENTER)  # 直接按回车


    time.sleep(10)

finally:
    driver.close()</code></pre>
<h3 id="selenium爬取京东商品信息">selenium爬取京东商品信息</h3>
<pre><code><code>from selenium import webdriver
import time
from selenium.webdriver.common.keys import Keys  # 键盘按键操作

driver = webdriver.Chrome(r&#39;E:\chromedriver_win32\chromedriver.exe&#39;)

try:
    driver.implicitly_wait(10)  # 等待浏览器加载数据10s
    driver.get(&#39;https://www.jd.com/&#39;)

    # 通过id号查找输入框
    goods_input = driver.find_element_by_id(&#39;key&#39;)
    goods_input.send_keys(&#39;笔记本电脑&#39;)
    # 操纵键盘 按回车键
    goods_input.send_keys(Keys.ENTER)   # 直接按回车搜索
    time.sleep(3)   # 等待数据加载完成

    # 通过id查找所有商品的父标签
    goods_div = driver.find_element_by_id(&#39;J_goodsList&#39;)
    # 通过class 标签查找goods_div下的所有li标签
    goods_list = goods_div.find_elements_by_class_name(&#39;gl-item&#39;)
    # print(goods_list)

    # 循环 获取li标签
    for goods in goods_list:
        # 获取商品价格文本
        # goods_price = goods.find_element_by_link_text(&#39;p-price&#39;).text
        # css属性选择器
        goods_price = goods.find_element_by_css_selector(&#39;.p-price i&#39;).text
        goods_name = goods.find_element_by_css_selector(&#39;.p-name em&#39;).text
        goods_commit = goods.find_element_by_css_selector(&#39;.p-commit a&#39;).text
        goods_url = goods.find_element_by_css_selector(&#39;.p-name a&#39;).get_attribute(&#39;href&#39;)

        goods_data = f&#39;&#39;&#39;
        商品名称：{goods_name}
        商品价格：{goods_price}
        评价人数：{goods_commit}
        详情链接：{goods_url}
        &#39;&#39;&#39;
        with open(&#39;笔记本电脑.txt&#39;, &#39;a&#39;, encoding=&#39;utf8&#39;) as f:
            f.write(goods_data)
            
    time.sleep(10)

finally:
    driver.close()</code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>