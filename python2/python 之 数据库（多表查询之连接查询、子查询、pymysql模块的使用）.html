<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）</center></div><div class='banquan'>原文出处:本文由博客园博主small_white-提供。<br/>
原文连接:https://www.cnblogs.com/mylu/p/11305700.html</div><br>
    <h3 class="md-end-block md-heading md-focus"><span class="md-plain">10.10 多表连接查询</span></h3>
<h4 class="md-end-block md-heading"><span class="md-plain">10.101 内连接</span></h4>
<p class="md-end-block md-p"><span class="md-plain">把两张表有对应关系的记录连接成一张虚拟表</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span><span style="color: #000000;"> emp,dep；                                  #连接两张表的笛卡尔积
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp,dep <span style="color: #0000ff;">where</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id;            # 不推荐用where连接表
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id;    #推荐
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name      <span style="color: #808080;">|</span> sex    <span style="color: #808080;">|</span> age  <span style="color: #808080;">|</span> dep_id <span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon      <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex      <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">48</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">|</span> wupeiqi   <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">38</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">4</span> <span style="color: #808080;">|</span> yuanhao   <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">28</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span> 销售         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">5</span> <span style="color: #808080;">|</span> liwenzhou <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+--------+------+--------+------+--------------+</span></pre>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show('43d5c924-2d10-4afb-b3ad-db34be642965')"><img id="code_img_closed_43d5c924-2d10-4afb-b3ad-db34be642965" class="code_img_closed" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）0.png" alt="" /><img id="code_img_opened_43d5c924-2d10-4afb-b3ad-db34be642965" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('43d5c924-2d10-4afb-b3ad-db34be642965',event)" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）1.png" alt="" />
<div id="cnblogs_code_open_43d5c924-2d10-4afb-b3ad-db34be642965" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">#应用：
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp,dep <span style="color: #0000ff;">where</span> emp.dep_id <span style="color: #808080;">=</span> dep.id <span style="color: #808080;">and</span> dep.name <span style="color: #808080;">=</span><span style="color: #000000;"> "技术"; 
</span><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span> dep.id <span style="color: #0000ff;">where</span> dep.name <span style="color: #808080;">=</span><span style="color: #000000;"> "技术";
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+------+------+--------+------+--------+</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name      <span style="color: #808080;">|</span> sex  <span style="color: #808080;">|</span> age  <span style="color: #808080;">|</span> dep_id <span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name   <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+------+------+--------+------+--------+</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon      <span style="color: #808080;">|</span> male <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术   <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">5</span> <span style="color: #808080;">|</span> liwenzhou <span style="color: #808080;">|</span> male <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术   <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+-----------+------+------+--------+------+--------+</span></pre>
</div>
<span class="cnblogs_code_collapse">应用</span></div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.102 左连接</span></h4>
<p class="md-end-block md-p"><span class="md-plain">在内连接的基础上，保留左边没有对应关系的记录</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #808080;">left</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name       <span style="color: #808080;">|</span> sex    <span style="color: #808080;">|</span> age  <span style="color: #808080;">|</span> dep_id <span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon       <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">5</span> <span style="color: #808080;">|</span> liwenzhou  <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex       <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">48</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">|</span> wupeiqi    <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">38</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">4</span> <span style="color: #808080;">|</span> yuanhao    <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">28</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span> 销售         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">6</span> <span style="color: #808080;">|</span> jingliyang <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">204</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+------------+--------+------+--------+------+--------------+</span></pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.103 右连接</span></h4>
<p class="md-end-block md-p"><span class="md-plain">在内连接的基础上，保留右边没有对应关系的记录</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #808080;">right</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+-----------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name      <span style="color: #808080;">|</span> sex    <span style="color: #808080;">|</span> age  <span style="color: #808080;">|</span> dep_id <span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+-----------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon      <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex      <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">48</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">|</span> wupeiqi   <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">38</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">4</span> <span style="color: #808080;">|</span> yuanhao   <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">28</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span> 销售         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">5</span> <span style="color: #808080;">|</span> liwenzhou <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>      <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>   <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span>   <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">203</span> <span style="color: #808080;">|</span> 运营         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+-----------+--------+------+--------+------+--------------+</span></pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.104 全连接</span></h4>
<p class="md-end-block md-p"><span class="md-plain">在内连接的基础上，保留左、右边没有对应关系的记录，并去重</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #808080;">left</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id
</span><span style="color: #0000ff;">union</span>
<span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #808080;">right</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+------------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name       <span style="color: #808080;">|</span> sex    <span style="color: #808080;">|</span> age  <span style="color: #808080;">|</span> dep_id <span style="color: #808080;">|</span> id   <span style="color: #808080;">|</span> name         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+------------+--------+------+--------+------+--------------+</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon       <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">5</span> <span style="color: #808080;">|</span> liwenzhou  <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">200</span> <span style="color: #808080;">|</span> 技术         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex       <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">48</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">3</span> <span style="color: #808080;">|</span> wupeiqi    <span style="color: #808080;">|</span> male   <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">38</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">201</span> <span style="color: #808080;">|</span> 人力资源     <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">4</span> <span style="color: #808080;">|</span> yuanhao    <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">28</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">202</span> <span style="color: #808080;">|</span> 销售         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">6</span> <span style="color: #808080;">|</span> jingliyang <span style="color: #808080;">|</span> female <span style="color: #808080;">|</span>   <span style="color: #800000; font-weight: bold;">18</span> <span style="color: #808080;">|</span>    <span style="color: #800000; font-weight: bold;">204</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>         <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>       <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span>   <span style="color: #808080;">|</span> <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span>   <span style="color: #0000ff;">NULL</span> <span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">203</span> <span style="color: #808080;">|</span> 运营         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">----+------------+--------+------+--------+------+--------------+</span></pre>
</div>
<p class="md-end-block md-p"><span><strong>补充：</strong><span class="md-plain">多表连接可以不断地与虚拟表连接</span></span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('e63480f2-47ae-4843-950d-463f7bb8e799')"><img id="code_img_closed_e63480f2-47ae-4843-950d-463f7bb8e799" class="code_img_closed" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）0.png" alt="" /><img id="code_img_opened_e63480f2-47ae-4843-950d-463f7bb8e799" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('e63480f2-47ae-4843-950d-463f7bb8e799',event)" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）1.png" alt="" />
<div id="cnblogs_code_open_e63480f2-47ae-4843-950d-463f7bb8e799" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">#查找各部门最高工资
</span><span style="color: #0000ff;">select</span> t1.<span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">as</span> t1 <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span> (<span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">max</span>(salary) <span style="color: #0000ff;">as</span> ms <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span> post) <span style="color: #0000ff;">as</span><span style="color: #000000;"> t2
</span><span style="color: #0000ff;">on</span> t1.post <span style="color: #808080;">=</span><span style="color: #000000;"> t2.post
</span><span style="color: #0000ff;">where</span> t1.salary <span style="color: #808080;">=</span> t2.ms;</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<h3 class="md-end-block md-heading"><span class="md-plain">10.11 子查询</span></h3>
<p class="md-end-block md-p"><span class="md-plain">把一个查询语句用括号括起来，当做另外一条查询语句的条件去用，称为子查询</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">#查询技术部员工的名字
</span><span style="color: #0000ff;">select</span> emp.name <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span> dep.id <span style="color: #0000ff;">where</span> dep.name<span style="color: #808080;">=</span><span style="color: #000000;">"技术";#连接查询
</span><span style="color: #0000ff;">select</span> name <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> dep_id <span style="color: #808080;">=</span>(<span style="color: #0000ff;">select</span> id <span style="color: #0000ff;">from</span> dep <span style="color: #0000ff;">where</span> name<span style="color: #808080;">=</span><span style="color: #000000;">"技术");          #子查询
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------+</span>
<span style="color: #808080;">|</span> name      <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------+</span>
<span style="color: #808080;">|</span> egon      <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> liwenzhou <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">---------+</span>
<span style="color: #000000;">#查询平均年龄在25岁以上的部门名                                                       #子查询
</span><span style="color: #0000ff;">select</span> name <span style="color: #0000ff;">from</span> dep <span style="color: #0000ff;">where</span> id <span style="color: #808080;">in</span> (<span style="color: #0000ff;">select</span> dep_id <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span> dep_id <span style="color: #0000ff;">having</span> <span style="color: #ff00ff;">avg</span>(age) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">25</span><span style="color: #000000;">);
</span><span style="color: #0000ff;">select</span> dep.name <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span> dep <span style="color: #0000ff;">on</span> emp.dep_id <span style="color: #808080;">=</span><span style="color: #000000;"> dep.id                         #连接查询
    </span><span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span><span style="color: #000000;"> dep.name
    </span><span style="color: #0000ff;">having</span> <span style="color: #ff00ff;">avg</span>(age) <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">25</span><span style="color: #000000;">;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">------------+</span>
<span style="color: #808080;">|</span> name         <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">------------+</span>
<span style="color: #808080;">|</span> 人力资源      <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> 销售          <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">------------+</span>
<span style="color: #000000;">#查询每个部门最新入职的那位员工
</span><span style="color: #0000ff;">select</span> t1.id,t1.name,t1.post,t1.hire_date,t2.post,t2.max_date <span style="color: #0000ff;">from</span> (emp <span style="color: #0000ff;">as</span> t1) <span style="color: #0000ff;">inner</span> <span style="color: #808080;">join</span><span style="color: #000000;">
(</span><span style="color: #0000ff;">select</span> post,<span style="color: #ff00ff;">max</span>(hire_date) <span style="color: #0000ff;">as</span> max_date <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">group</span> <span style="color: #0000ff;">by</span> post) <span style="color: #0000ff;">as</span><span style="color: #000000;"> t2   #拿到最大雇佣时间
</span><span style="color: #0000ff;">on</span> t1.post <span style="color: #808080;">=</span><span style="color: #000000;"> t2.post
</span><span style="color: #0000ff;">where</span> t1.hire_date <span style="color: #808080;">=</span><span style="color: #000000;"> t2.max_date;
</span><span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+--------+-----------------------------------------+----</span>
<span style="color: #808080;">|</span> id <span style="color: #808080;">|</span> name   <span style="color: #808080;">|</span> post    <span style="color: #808080;">|</span> hire_date  <span style="color: #808080;">|</span> post    <span style="color: #808080;">|</span>  max_date  <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+--------+-----------------------------------------+-----</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">1</span> <span style="color: #808080;">|</span> egon   <span style="color: #808080;">|</span> 外交大使 <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2017</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">01</span> <span style="color: #808080;">|</span> 外交大使 <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2017</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">01</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span>  <span style="color: #800000; font-weight: bold;">2</span> <span style="color: #808080;">|</span> alex   <span style="color: #808080;">|</span> teacher <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2015</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">02</span> <span style="color: #808080;">|</span> teacher  <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2015</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">02</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">13</span> <span style="color: #808080;">|</span> 格格   <span style="color: #808080;">|</span> sale     <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2017</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">01</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">27</span> <span style="color: #808080;">|</span> sale     <span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2017</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">01</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">27</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">14</span> <span style="color: #808080;">|</span> 张野   <span style="color: #808080;">|</span> operation<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2016</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">11</span> <span style="color: #808080;">|</span> operation<span style="color: #808080;">|</span> <span style="color: #800000; font-weight: bold;">2016</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">03</span><span style="color: #808080;">-</span><span style="color: #800000; font-weight: bold;">11</span> <span style="color: #808080;">|</span>
<span style="color: #808080;">+</span><span style="color: #008080;">--</span><span style="color: #008080;">--+--------+-----------------------------------------+-----</span></pre>
</div>
<p class="md-end-block md-p"><span><strong>exists( )：</strong><span class="md-plain">括号内的值存在时满足条件</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> emp <span style="color: #0000ff;">where</span> <span style="color: #808080;">exists</span> (<span style="color: #0000ff;">select</span> id <span style="color: #0000ff;">from</span> dep <span style="color: #0000ff;">where</span> id <span style="color: #808080;">&gt;</span> <span style="color: #800000; font-weight: bold;">3</span>);       #找到所有</pre>
</div>
<h3 class="md-end-block md-heading"><span class="md-plain">10.12 pymysql模块的使用</span></h3>
<h4 class="md-end-block md-heading"><span class="md-plain">10.121 pymysql查</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import pymysql              #pip3 install pymysql
conn</span><span style="color: #808080;">=</span><span style="color: #000000;">pymysql.connect(        #连接
    host</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">127.0.0.1</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    port</span><span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">3306</span><span style="color: #000000;">,
    </span><span style="color: #ff00ff;">user</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">root</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    password</span><span style="color: #808080;">=</span><span style="color: #ff0000;">''</span><span style="color: #000000;">,
    </span><span style="color: #0000ff;">database</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">db2</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    charset</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">utf8</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">cursor</span><span style="color: #808080;">=</span>conn.<span style="color: #0000ff;">cursor</span><span style="color: #000000;">(pymysql.cursors.DictCursor)#以字典形式显示表的记录
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">execute</span>(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">show tables;</span><span style="color: #ff0000;">'</span>)           #<span style="color: #800000; font-weight: bold;">1</span><span style="color: #000000;"> 显示受影响的行数(row),此处为有表的条数
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(rows)
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">execute</span>(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">select * from emp;</span><span style="color: #ff0000;">'</span>)      #<span style="color: #800000; font-weight: bold;">18</span><span style="color: #000000;"> 此处rows为emp表内有记录的条数
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(rows)
​
</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span>.fetchone())     #查看一条记录 一个字典{<span style="color: #0000ff;">key</span><span style="color: #000000;">:value}
</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span>.fetchmany(<span style="color: #800000; font-weight: bold;">2</span>))   #查看多条记录 <span style="color: #ff0000;">[</span><span style="color: #ff0000;">{key:value},</span><span style="color: #ff0000;">]</span><span style="color: #000000;">
#</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span><span style="color: #000000;">.fetchall())    #查看所有记录 强调：下一次查找是接着上一次查找的位置继续
​
</span><span style="color: #0000ff;">cursor</span>.scroll(<span style="color: #800000; font-weight: bold;">0</span>,<span style="color: #ff0000;">'</span><span style="color: #ff0000;">absolute</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)  #绝对移动，以0位置为参照显示
</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span><span style="color: #000000;">.fetchone())
​
</span><span style="color: #0000ff;">cursor</span>.scroll(<span style="color: #800000; font-weight: bold;">1</span>,<span style="color: #ff0000;">'</span><span style="color: #ff0000;">relative</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)  #相对移动，相对当前位置移动1条记录
</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span><span style="color: #000000;">.fetchone())
​
</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">close</span><span style="color: #000000;">()#光标
conn.</span><span style="color: #0000ff;">close</span>()</pre>
</div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.122 防止sql注入问题</span></h4>
<p class="md-end-block md-p"><span class="md-plain">在服务端防止sql注入问题：不要自己拼接字符串，让pymysql模块去拼接，pymysql拼接时会过滤非法字符</span></p>
<div class="cnblogs_code" onclick="cnblogs_code_show('80bc8cc7-d845-4202-9b50-6197169de885')"><img id="code_img_closed_80bc8cc7-d845-4202-9b50-6197169de885" class="code_img_closed" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）0.png" alt="" /><img id="code_img_opened_80bc8cc7-d845-4202-9b50-6197169de885" class="code_img_opened" style="display: none;" onclick="cnblogs_code_hide('80bc8cc7-d845-4202-9b50-6197169de885',event)" src="./images/python 之 数据库（多表查询之连接查询、子查询、pymysql模块的使用）1.png" alt="" />
<div id="cnblogs_code_open_80bc8cc7-d845-4202-9b50-6197169de885" class="cnblogs_code_hide">
<pre><code><span style="color: #000000;">import pymysql 
conn</span><span style="color: #808080;">=</span><span style="color: #000000;">pymysql.connect(
    host</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">127.0.0.1</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    port</span><span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">3306</span><span style="color: #000000;">,
    </span><span style="color: #ff00ff;">user</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">root</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    password</span><span style="color: #808080;">=</span><span style="color: #ff0000;">''</span><span style="color: #000000;">,
    </span><span style="color: #0000ff;">database</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">db2</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    charset</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">utf8</span><span style="color: #ff0000;">'</span><span style="color: #000000;">
)
</span><span style="color: #0000ff;">cursor</span><span style="color: #808080;">=</span>conn.<span style="color: #0000ff;">cursor</span><span style="color: #000000;">(pymysql.cursors.DictCursor)
​
inp_user</span><span style="color: #808080;">=</span>input(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">用户名&gt;&gt;：</span><span style="color: #ff0000;">'</span>).strip() #inp_user<span style="color: #808080;">=</span><span style="color: #000000;">""
inp_pwd</span><span style="color: #808080;">=</span>input(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">密码&gt;&gt;：</span><span style="color: #ff0000;">'</span>).strip() #inp_pwd<span style="color: #808080;">=</span><span style="color: #000000;">""
sql</span><span style="color: #808080;">=</span>"<span style="color: #0000ff;">select</span> <span style="color: #808080;">*</span> <span style="color: #0000ff;">from</span> <span style="color: #ff00ff;">user</span> <span style="color: #0000ff;">where</span> username<span style="color: #808080;">=%</span>s <span style="color: #808080;">and</span> password<span style="color: #808080;">=%</span><span style="color: #000000;">s"
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(sql)
            
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">execute</span><span style="color: #000000;">(sql,(inp_user,inp_pwd))#输入的用户名和密码中的非法字符会被过滤掉
</span><span style="color: #0000ff;">if</span><span style="color: #000000;"> rows:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">登录成功</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
    </span><span style="color: #0000ff;">print</span>(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">登录失败</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">close</span><span style="color: #000000;">()
conn.</span><span style="color: #0000ff;">close</span>()</pre>
</div>
<span class="cnblogs_code_collapse">View Code</span></div>
<h4 class="md-end-block md-heading"><span class="md-plain">10.123 pymysql增删改</span></h4>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">import pymysql 
conn</span><span style="color: #808080;">=</span><span style="color: #000000;">pymysql.connect(
    host</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">127.0.0.1</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    port</span><span style="color: #808080;">=</span><span style="color: #800000; font-weight: bold;">3306</span><span style="color: #000000;">,
    </span><span style="color: #ff00ff;">user</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">root</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    password</span><span style="color: #808080;">=</span><span style="color: #ff0000;">''</span><span style="color: #000000;">,
    </span><span style="color: #0000ff;">database</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">db2</span><span style="color: #ff0000;">'</span><span style="color: #000000;">,
    charset</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">utf8</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">cursor</span><span style="color: #808080;">=</span>conn.<span style="color: #0000ff;">cursor</span><span style="color: #000000;">(pymysql.cursors.DictCursor)          
sql</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">insert into user(username,password) values(%s,%s)</span><span style="color: #ff0000;">'</span><span style="color: #000000;">         #插入单行记录
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">execute</span>(sql,(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">EGON</span><span style="color: #ff0000;">'</span>,<span style="color: #ff0000;">'</span><span style="color: #ff0000;">123456</span><span style="color: #ff0000;">'</span><span style="color: #000000;">))              
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(rows)
</span><span style="color: #0000ff;">print</span>(<span style="color: #0000ff;">cursor</span><span style="color: #000000;">.lastrowid)                                      #显示当前最后一行的id
​
sql</span><span style="color: #808080;">=</span><span style="color: #ff0000;">'</span><span style="color: #ff0000;">insert into user(username,password) values(%s,%s)</span><span style="color: #ff0000;">'</span><span style="color: #000000;">         #一次插入多行记录
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.executemany(sql,<span style="color: #ff0000;">[</span><span style="color: #ff0000;">('lwz','123'),('evia','455'),('lsd','333')</span><span style="color: #ff0000;">]</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(rows)
​
rows</span><span style="color: #808080;">=</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">execute</span>(<span style="color: #ff0000;">'</span><span style="color: #ff0000;">update user set username="alexSB" where id=2</span><span style="color: #ff0000;">'</span><span style="color: #000000;">)#修改记录
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(rows)
​
conn.</span><span style="color: #0000ff;">commit</span><span style="color: #000000;">() # 只有commit提交才会完成真正的修改
</span><span style="color: #0000ff;">cursor</span>.<span style="color: #0000ff;">close</span><span style="color: #000000;">()
conn.</span><span style="color: #0000ff;">close</span>()</pre>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>