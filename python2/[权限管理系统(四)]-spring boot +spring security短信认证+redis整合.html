<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='ç”µè„‘,ç”µè„‘è®²è§£,ç”µè„‘æŠ€æœ¯,ç¼–ç¨‹,ç”µè„‘æ•…éšœç»´ä¿®[æƒé™ç®¡ç†ç³»ç»Ÿ(å››)]-spring boot +spring securityçŸ­ä¿¡è®¤è¯+redisæ•´åˆ' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>é¦–é¡µ</a></li>
</div><div onclick='hidden1()' >åˆ†äº«</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>[æƒé™ç®¡ç†ç³»ç»Ÿ(å››)]-spring boot +spring securityçŸ­ä¿¡è®¤è¯+redisæ•´åˆ</center></div><div class='banquan'>åŸæ–‡å‡ºå¤„:æœ¬æ–‡ç”±åšå®¢å›­åšä¸»Ccwwç¬”è®°æä¾›ã€‚<br/>
åŸæ–‡è¿æ¥:https://www.cnblogs.com/Ccwwlx/p/12054169.html</div><br>
    <h2 class="md-end-block md-heading"><span class="md-plain md-expand">[æƒé™ç®¡ç†ç³»ç»Ÿ]spring boot +spring securityçŸ­ä¿¡è®¤è¯+redisæ•´åˆ</span></h2>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">ç°åœ¨ä¸»æµçš„ç™»å½•æ–¹å¼ä¸»è¦æœ‰ 3 ç§ï¼šè´¦å·å¯†ç ç™»å½•ã€çŸ­ä¿¡éªŒè¯ç ç™»å½•å’Œç¬¬ä¸‰æ–¹æˆæƒç™»å½•,å‰é¢ä¸€èŠ‚<span class=" md-link"><a href="https://www.cnblogs.com/Ccwwlx/p/12033546.html"><span class="md-plain">Spring securityï¼ˆä¸‰ï¼‰---è®¤è¯è¿‡ç¨‹</span></a><span class="md-plain">å·²åˆ†æäº†spring securityè´¦å·å¯†ç æ–¹å¼ç™»é™†ï¼Œç°åœ¨æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹spring securityçŸ­ä¿¡æ–¹å¼è®¤è¯ç™»é™†ã€‚</span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">Spring security çŸ­ä¿¡æ–¹å¼ã€IPéªŒè¯ç­‰ç±»ä¼¼æ¨¡å¼ç™»å½•æ–¹å¼éªŒè¯ï¼Œå¯ä»¥æ ¹æ®<span><strong>è´¦å·å¯†ç æ–¹å¼ç™»å½•</strong><span class="md-plain">æ­¥éª¤ä»¿å†™å‡ºæ¥ï¼Œå…¶ä¸»è¦ä»¥ä»¥ä¸‹æ­¥éª¤è¿›è¡Œå±•å¼€ï¼š</span></span></span></span></span></p>
<ol class="ol-list" start="">
<li class="md-list-item md-focus-container">
<p class="md-end-block md-p md-focus"><span class="md-plain md-expand">è‡ªå®šä¹‰Filterï¼š</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰Authentication</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰AuthenticationProvider </span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰UserDetailsService</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">SecurityConfigé…ç½®</span></p>
</li>
</ol>
<h2 class="md-end-block md-heading"><span class="md-plain">1. è‡ªå®šä¹‰filterï¼š</span></h2>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">è‡ªå®šä¹‰filterå¯ä»¥æ ¹æ®<span><strong>UsernamePasswordAuthenticationFilter</strong><span class="md-plain">è¿‡æ»¤å™¨è¿›è¡Œä»¿å†™ï¼Œå…¶å®è´¨å³å®ç°<span><strong>AbstractAuthenticationProcessingFilter</strong><span class="md-plain">æŠ½è±¡ç±»ï¼Œä¸»è¦æµç¨‹åˆ†ä¸ºï¼š</span></span></span></span></span></span></span></p>
<ol class="ol-list" start="">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">æ„å»ºæ„é€ å™¨ï¼Œå¹¶åœ¨æ„é€ å™¨ä¸­è¿›è¡Œé…ç½®è¯·æ±‚è·¯å¾„ä»¥åŠè¯·æ±‚æ–¹å¼çš„è¿‡æ»¤</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰attemptAuthentication()è®¤è¯æ­¥éª¤</span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-plain">åœ¨2æ­¥éª¤ä¸­è®¤è¯è¿‡ç¨‹ä¸­éœ€è¦<span><strong>AuthenticationProvider</strong><span class="md-plain">è¿›è¡Œæœ€ç»ˆçš„è®¤è¯ï¼Œåœ¨è®¤è¯filteréƒ½éœ€è¦å°†AuthenticationProviderè®¾ç½®è¿›filterä¸­ï¼Œè€Œç®¡ç†AuthenticationProviderçš„æ˜¯<span><strong>AuthenticationManager</strong><span class="md-plain">ï¼Œå› æ­¤æˆ‘ä»¬åˆ›å»ºè¿‡æ»¤å™¨filterçš„æ—¶å€™éœ€è¦è®¾ç½®AuthenticationManagerï¼Œè¿™æ­¥å…·ä½“è¯¦æƒ…åœ¨<span><strong>5.1 SecurityConfigé…ç½®æ­¥éª¤</strong><span class="md-plain">ã€‚</span></span></span></span></span></span></span></p>
</li>
</ol>
<p class="md-end-block md-p"><span class="md-plain">åœ¨ç¬¬<span><strong>2</strong><span class="md-plain">æ­¥ä¸­<span><strong>attemptAuthentication()è®¤è¯æ–¹æ³•</strong><span class="md-plain">ä¸»è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š<span class="md-linebreak"> <span class="md-linebreak-mark"> <span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;</span></span></span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><span><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain">ã€€ã€€1).postè¯·æ±‚è®¤è¯ï¼›<span class="md-linebreak"> <span class="md-linebreak-mark"> <span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><span><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain">ã€€ã€€2).requestè¯·æ±‚è·å–æ‰‹æœºå·ç å’ŒéªŒè¯ç ï¼›<span class="md-linebreak"> <span class="md-linebreak-mark"> <span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><span><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain">ã€€ã€€3).ç”¨è‡ªå®šä¹‰çš„Authenticationå¯¹è±¡å°è£…æ‰‹æœºå·ç å’ŒéªŒè¯ç ï¼›<span class="md-linebreak"> <span class="md-linebreak-mark"> <span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain"><span><span class="md-plain"><span><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain"><span class="md-linebreak"><span class="md-linebreak-mark"><span class="md-plain"><span class="md-entity" data-content="&emsp;"><span class="md-entity" data-content="&emsp;"><span class="md-plain">ã€€ã€€4).ä½¿ç”¨AuthenticationManager.authenticate()æ–¹æ³•è¿›è¡ŒéªŒè¯ã€‚</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰filterå®ç°ä»£ç ï¼š</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SmsAuthenticationfilter <span style="color: #0000ff;">extends</span><span style="color: #000000;"> AbstractAuthenticationProcessingFilter {
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">boolean</span> postOnly = <span style="color: #0000ff;">true</span><span style="color: #000000;">;
â€‹
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> SmsAuthenticationfilter() {
      </span><span style="color: #0000ff;">super</span>(<span style="color: #0000ff;">new</span> AntPathRequestMatcher(SecurityConstants.APP_MOBILE_LOGIN_URL, "POST"<span style="color: #000000;">));
   }
    @Override
    </span><span style="color: #0000ff;">public</span> Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> AuthenticationException, IOException, ServletException {
        </span><span style="color: #0000ff;">if</span> (postOnly &amp;&amp; !request.getMethod().equals("POST"<span style="color: #000000;">)) {
              </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> AuthenticationServiceException(
                   </span>"Authentication method not supported: " +<span style="color: #000000;"> request.getMethod());
      }
        Assert.hasText(SecurityConstants.MOBILE_NUMBER_PARAMETER, </span>"mobile parameter must not be empty or null"<span style="color: #000000;">);
     
         String mobile </span>=<span style="color: #000000;"> request.getParameter(SecurityConstants.MOBILE_NUMBER_PARAMETER);
        String smsCode </span>= request.ge+<span style="color: #000000;">tParameter(SecurityConstants.MOBILE_VERIFY_CODE_PARAMETER);
        </span><span style="color: #0000ff;">if</span> (mobile == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            mobile</span>=""<span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">if</span>(smsCode == <span style="color: #0000ff;">null</span><span style="color: #000000;">){
            smsCode</span>=""<span style="color: #000000;">;
        }
        mobile </span>=<span style="color: #000000;"> mobile.trim();
        smsCode </span>=<span style="color: #000000;"> smsCode.trim();
        SmsAuthenticationToken authRequest </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> SmsAuthenticationToken(mobile,smsCode);
â€‹
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> Allow subclasses to set the "details" property</span>
<span style="color: #000000;">        setDetails(request, authRequest);
    
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.getAuthenticationManager().authenticate(authRequest);
    }</span><span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setDetails(HttpServletRequest request,
                              SmsAuthenticationToken authRequest) {
        authRequest.setDetails(authenticationDetailsSource.buildDetails(request));
    }
â€‹
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setPostOnly(<span style="color: #0000ff;">boolean</span><span style="color: #000000;"> postOnly) {
        </span><span style="color: #0000ff;">this</span>.postOnly =<span style="color: #000000;"> postOnly;
    }
â€‹
}</span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">2. Authenticationï¼š</span></h2>
<p class="md-end-block md-p"><span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">åœ¨filterä»¥åŠåé¢çš„è®¤è¯éƒ½éœ€è¦ä½¿ç”¨åˆ°è‡ªå®šä¹‰çš„Authenticationå¯¹è±¡ï¼Œè‡ªå®šä¹‰Authenticationå¯¹è±¡å¯ä»¥æ ¹æ®<span><strong>UsernamePasswordAuthenticationToken</strong><span class="md-plain">è¿›è¡Œä»¿å†™ï¼Œå®ç°<span><strong>AbstractAuthenticationToken</strong><span class="md-plain">æŠ½è±¡ç±»ã€‚ </span></span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰SmsAuthenticationTokenï¼š</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SmsAuthenticationToken <span style="color: #0000ff;">extends</span><span style="color: #000000;"> AbstractAuthenticationToken {
â€‹
    </span><span style="color: #0000ff;">private</span> <span style="color: #0000ff;">final</span><span style="color: #000000;"> Object principal;
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> Object credentials;
â€‹
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> SmsAuthenticationToken(Object principal,Object credentials ) {
        </span><span style="color: #0000ff;">super</span>(<span style="color: #0000ff;">null</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">this</span>.principal =<span style="color: #000000;"> principal;
        </span><span style="color: #0000ff;">this</span>.credentials=<span style="color: #000000;">credentials;
        setAuthenticated(</span><span style="color: #0000ff;">false</span><span style="color: #000000;">);
    }
â€‹
    </span><span style="color: #0000ff;">public</span> SmsAuthenticationToken(Object principal, Object credentials,Collection&lt;? <span style="color: #0000ff;">extends</span> GrantedAuthority&gt;<span style="color: #000000;"> authorities) {
        </span><span style="color: #0000ff;">super</span>(<span style="color: #0000ff;">null</span><span style="color: #000000;">);
        </span><span style="color: #0000ff;">this</span>.principal =<span style="color: #000000;"> principal;
        </span><span style="color: #0000ff;">this</span>.credentials=<span style="color: #000000;">credentials;
        setAuthenticated(</span><span style="color: #0000ff;">true</span><span style="color: #000000;">);
    }
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Object getCredentials() {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span>.credentials=<span style="color: #000000;">credentials;
    }
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Object getPrincipal() {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">this</span><span style="color: #000000;">.principal;
    }
â€‹
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> setAuthenticated(<span style="color: #0000ff;">boolean</span> isAuthenticated) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> IllegalArgumentException {
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (isAuthenticated) {
            </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> IllegalArgumentException(
                    </span>"Cannot set this token to trusted - use constructor which takes a GrantedAuthority list instead"<span style="color: #000000;">);
        }
â€‹
        </span><span style="color: #0000ff;">super</span>.setAuthenticated(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
    }
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> eraseCredentials() {
        </span><span style="color: #0000ff;">super</span><span style="color: #000000;">.eraseCredentials();
â€‹
    }
}</span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">3.AuthenticationProvider </span></h2>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">AuthenticationProvideræœ€ç»ˆè®¤è¯ç­–ç•¥å…¥å£ï¼ŒçŸ­ä¿¡æ–¹å¼éªŒè¯éœ€è‡ªå®šä¹‰AuthenticationProviderã€‚å¯ä»¥æ ¹æ®<span><strong>AbstractUserDetailsAuthenticationProvider</strong><span class="md-plain">è¿›è¡Œä»¿å†™ï¼Œ<span><strong>å®ç°AuthenticationProviderä»¥åŠMessageSourceAwareæ¥å£</strong><span class="md-plain">ã€‚è®¤è¯é€»è¾‘å¯ä»¥å®šä¹‰å®ç°ã€‚</span></span></span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰AuthenticationProviderï¼š</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SmsAuthenticationProvide <span style="color: #0000ff;">implements</span><span style="color: #000000;"> AuthenticationProvider, MessageSourceAware {
  </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> UserDetailsService userDetailsService;
  </span><span style="color: #0000ff;">private</span> MessageSourceAccessor messages =<span style="color: #000000;"> SpringSecurityMessageSource.getAccessor();
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setMessageSource(MessageSource messageSource) {
        </span><span style="color: #0000ff;">this</span>.messages = <span style="color: #0000ff;">new</span><span style="color: #000000;"> MessageSourceAccessor(messageSource);
    }
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> Authentication authenticate(Authentication authentication) {
        Assert.isInstanceOf(SmsAuthenticationToken.</span><span style="color: #0000ff;">class</span><span style="color: #000000;">, authentication,
                messages.getMessage(
                        </span>"AbstractUserDetailsAuthenticationProvider.onlySupports"<span style="color: #000000;">,
                        </span>"Only UsernamePasswordAuthenticationToken is supported"<span style="color: #000000;">));
        SmsAuthenticationToken authenticationToken </span>=<span style="color: #000000;"> (SmsAuthenticationToken) authentication;
        </span><span style="color: #008000;">//</span><span style="color: #008000;">å°†éªŒè¯ä¿¡æ¯ä¿å­˜åœ¨SecurityContextä»¥ä¾›UserDetailsServiceè¿›è¡ŒéªŒè¯</span>
        SecurityContext context =<span style="color: #000000;"> SecurityContextHolder.getContext();
        context.setAuthentication(authenticationToken);
        String mobile </span>=<span style="color: #000000;"> (String) authenticationToken.getPrincipal();
        </span><span style="color: #0000ff;">if</span> (mobile == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> InternalAuthenticationServiceException("can't obtain user info "<span style="color: #000000;">);
        }
        mobile </span>=<span style="color: #000000;"> mobile.trim();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">è¿›è¡ŒéªŒè¯ä»¥åŠè·å–ç”¨æˆ·ä¿¡æ¯</span>
        UserDetails user =<span style="color: #000000;"> userDetailsService.loadUserByUsername(mobile);
        </span><span style="color: #0000ff;">if</span> (user == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            </span><span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> InternalAuthenticationServiceException("can't obtain user info "<span style="color: #000000;">);
        }
        SmsAuthenticationToken smsAuthenticationToken </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> SmsAuthenticationToken(user, user.getAuthorities());
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> smsAuthenticationToken;
    }
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span> supports(Class&lt;?&gt;<span style="color: #000000;"> authentication) {
        </span><span style="color: #0000ff;">return</span> (SmsAuthenticationToken.<span style="color: #0000ff;">class</span><span style="color: #000000;">.isAssignableFrom(authentication));
    }
â€‹
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> setUserDetailsService(UserDetailsService userDetailsService) {
        </span><span style="color: #0000ff;">this</span>.userDetailsService =<span style="color: #000000;"> userDetailsService;
    }
â€‹
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> UserDetailsService getUserDetailsService() {
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> userDetailsService;
    }
}</span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">4. UserDetailsService</span></h2>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">åœ¨AuthenticationProvideræœ€ç»ˆè®¤è¯ç­–ç•¥å…¥å£ï¼Œ<span><strong>è®¤è¯æ–¹å¼å®ç°é€»è¾‘æ˜¯åœ¨UserDetailsService</strong><span class="md-plain">ã€‚å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®è‡ªå®šä¹‰è®¤è¯é€»è¾‘ã€‚ </span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">è‡ªå®šä¹‰UserDetailsServiceï¼š</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SmsUserDetailsService <span style="color: #0000ff;">implements</span><span style="color: #000000;"> UserDetailsService {
    @Autowired
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> RedisUtil redisUtil;
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span> UserDetails loadUserByUsername(String username) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> UsernameNotFoundException {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">ä»SecurityContextè·å–è®¤è¯æ‰€éœ€çš„ä¿¡æ¯ï¼ˆæ‰‹æœºå·ç ã€éªŒè¯ç ï¼‰</span>
        SecurityContext context =<span style="color: #000000;"> SecurityContextHolder.getContext();
        SmsAuthenticationToken authentication </span>=<span style="color: #000000;"> (SmsAuthenticationToken) context.getAuthentication();
        </span><span style="color: #0000ff;">if</span>(!<span style="color: #000000;">additionalAuthenticationChecks(username,authentication)){
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">null</span><span style="color: #000000;">;
        }
        </span><span style="color: #008000;">//</span><span style="color: #008000;">è·å–ç”¨æˆ·æ‰‹æœºå·ç å¯¹åº”ç”¨æˆ·çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬æƒé™ç­‰</span>
        <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span> User("admin", "123456", Arrays.asList(<span style="color: #0000ff;">new</span> SimpleGrantedAuthority("admin"<span style="color: #000000;">)));
    }
â€‹
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> additionalAuthenticationChecks(String mobile, SmsAuthenticationToken smsAuthenticationToken) {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">è·å–redisä¸­æ‰‹æœºé”®å€¼å¯¹åº”çš„valueéªŒè¯ç </span>
        String smsCode =<span style="color: #000000;"> redisUtil.get(mobile).toString();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">è·å–ç”¨æˆ·æäº¤çš„éªŒè¯ç </span>
        String credentials =<span style="color: #000000;"> (String) smsAuthenticationToken.getCredentials();
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;">(StringUtils.isEmpty(credentials)){
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (credentials.equalsIgnoreCase(smsCode)) {
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        }
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
    }
}</span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">5.SecurityConfig</span></h2>
<h3 class="md-end-block md-heading"><span class="md-plain">5.1 è‡ªå®šä¹‰SmsçŸ­ä¿¡éªŒè¯ç»„ä»¶é…ç½®SecurityConfig</span></h3>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">å°†è‡ªå®šä¹‰ç»„ä»¶é…ç½®SecurityConfigä¸­ï¼Œå¯ä»¥æ ¹æ®AbstractAuthenticationFilterConfigurer(å­ç±»FormLoginConfigurer)è¿›è¡Œä»¿å†™SmsAuthenticationSecurityConfigï¼Œä¸»è¦è¿›è¡Œä»¥ä¸‹é…ç½®ï¼š</span></span></span></p>
<ol class="ol-list" start="">
<li class="md-list-item">
<p class="md-end-block md-p"><span><strong>å°†é»˜è®¤AuthenticationManagerï¼ˆä¹Ÿå¯ä»¥å®šä¹‰çš„ï¼‰è®¾ç½®åˆ°è‡ªå®šä¹‰çš„filterè¿‡æ»¤å™¨ä¸­</strong></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span><strong>å°†è‡ªå®šä¹‰çš„UserDetailsServiceè®¾ç½®åˆ°è‡ªå®šä¹‰çš„AuthenticationProvideä¸­ä»¥ä¾›ä½¿ç”¨</strong></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span><strong>å°†è¿‡æ»¤å™¨æ·»åŠ åˆ°è¿‡æ»¤é“¾è·¯ä¸­ï¼Œå®æ–½è¿‡æ»¤æ“ä½œã€‚ï¼ˆä¸€èˆ¬ä»¥åŠ åœ¨UsernamePasswordAuthenticationFilterå‰ï¼‰</strong></span></p>
</li>
</ol>
<p class="md-end-block md-p"><span class="md-plain">é…ç½®SmsAuthenticationSecurityConfig:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;"> @Component
 </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> SmsAuthenticationSecurityConfig <span style="color: #0000ff;">extends</span> SecurityConfigurerAdapter&lt;DefaultSecurityFilterChain, HttpSecurity&gt;<span style="color: #000000;"> {
    @Autowired
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> UserDetailsService userDetailsService;
â€‹
    @Override
    </span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> configure(HttpSecurity http) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
        </span><span style="color: #008000;">//</span><span style="color: #008000;">åˆ›å»ºå¹¶é…ç½®å¥½è‡ªå®šä¹‰SmsAuthenticationfilterï¼Œ</span>
        SmsAuthenticationfilter smsAuthenticationfilter = <span style="color: #0000ff;">new</span><span style="color: #000000;"> SmsAuthenticationfilter();
        smsAuthenticationfilter.setAuthenticationManager(http.getSharedObject(AuthenticationManager.</span><span style="color: #0000ff;">class</span><span style="color: #000000;">));
        smsAuthenticationfilter.setAuthenticationSuccessHandler(customAuthenticationSuccessHandler());
        smsAuthenticationfilter.setAuthenticationFailureHandler(customAuthenticationFailureHandler());
        </span><span style="color: #008000;">//</span><span style="color: #008000;">åˆ›å»ºå¹¶é…ç½®å¥½è‡ªå®šä¹‰SmsAuthenticationProvide</span>
        SmsAuthenticationProvide smsAuthenticationProvide=<span style="color: #0000ff;">new</span><span style="color: #000000;"> SmsAuthenticationProvide();
        smsAuthenticationProvide.setUserDetailsService(userDetailsService);
        http.authenticationProvider(smsAuthenticationProvide);
        </span><span style="color: #008000;">//</span><span style="color: #008000;">å°†è¿‡æ»¤å™¨æ·»åŠ åˆ°è¿‡æ»¤é“¾è·¯ä¸­</span>
        http.addFilterAfter(smsAuthenticationfilter, UsernamePasswordAuthenticationFilter.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
    }
â€‹
    @Bean
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> CustomAuthenticationSuccessHandler customAuthenticationSuccessHandler() {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> CustomAuthenticationSuccessHandler();
    }
    
    @Bean
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> CustomAuthenticationFailureHandler customAuthenticationFailureHandler() {
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> CustomAuthenticationFailureHandler();
    }
}</span></pre>
</div>
<h3 class="md-end-block md-heading"><span class="md-plain">5.2 SecurityConfigä¸»é…ç½®</span></h3>
<p class="md-end-block md-p"><span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">SecurityConfigä¸»é…ç½®å¯ä»¥å‚ç…§ç¬¬äºŒèŠ‚<span class=" md-link"><a href="https://www.cnblogs.com/Ccwwlx/p/11978429.html"><span class="md-plain">Spring Securityï¼ˆäºŒï¼‰--WebSecurityConfigureré…ç½®ä»¥åŠfilteré¡ºåº</span></a><span class="md-plain">è¿›è¡Œé…ç½®ã€‚ </span></span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">SecurityConfigä¸»é…ç½®ï¼š</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">@Configuration
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> WebSecurityConfig <span style="color: #0000ff;">extends</span><span style="color: #000000;"> WebSecurityConfigurerAdapter {
    @Autowired
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> SmsAuthenticationSecurityConfig smsAuthenticationSecurityConfig;
    @Autowired
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> CustomAuthenticationSuccessHandler authenticationSuccessHandler;
    @Autowired
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> CustomAuthenticationFailureHandler authenticationFailureHandler;
â€‹
    @Override
    </span><span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span> configure(HttpSecurity http) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
        http.headers().frameOptions().disable().and()
                .formLogin()
                .loginPage(SecurityConstants.APP_FORM_LOGIN_PAGE)
                </span><span style="color: #008000;">//</span><span style="color: #008000;">é…ç½®formç™»é™†çš„è‡ªå®šä¹‰URL</span>
<span style="color: #000000;">                .loginProcessingUrl(SecurityConstants.APP_FORM_LOGIN_URL)
                .successHandler(authenticationSuccessHandler)
                .failureHandler(authenticationFailureHandler)
                .and()
                </span><span style="color: #008000;">//</span><span style="color: #008000;">é…ç½®smsAuthenticationSecurityConfig</span>
<span style="color: #000000;">                .apply(smsAuthenticationSecurityConfig)
                .and()
                </span><span style="color: #008000;">//</span><span style="color: #008000;">è¿è¡Œé€šè¿‡URL</span>
<span style="color: #000000;">                .authorizeRequests()
                .antMatchers(SecurityConstants.APP_MOBILE_VERIFY_CODE_URL,
                             SecurityConstants.APP_USER_REGISTER_URL)
                .permitAll()
                .and()
                .csrf().disable();
    }
    @Bean
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> ObjectMapper objectMapper(){
        </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> ObjectMapper();
    }
} </span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">6.å…¶ä»–</span></h2>
<h3 class="md-end-block md-heading"><span class="md-plain">6.1 redis</span></h3>
<p class="md-end-block md-p"><span class="md-plain">RedisUtilå·¥å…·ç±»ï¼š </span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">@Component
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RedisUtil {
    @Autowired
    </span><span style="color: #0000ff;">private</span> RedisTemplate&lt;String, Object&gt;<span style="color: #000000;"> redisTemplate;
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">
     * æ™®é€šç¼“å­˜è·å–
     *
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> key é”®
     * </span><span style="color: #808080;">@return</span><span style="color: #008000;"> å€¼
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span><span style="color: #000000;"> Object get(String key) {
        </span><span style="color: #0000ff;">return</span> key == <span style="color: #0000ff;">null</span> ? <span style="color: #0000ff;">null</span><span style="color: #000000;"> : redisTemplate.opsForValue().get(key);
    }
â€‹
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">
     * æ™®é€šç¼“å­˜æ”¾å…¥
     *
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> key   é”®
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> value å€¼
     * </span><span style="color: #808080;">@return</span><span style="color: #008000;"> trueæˆåŠŸ falseå¤±è´¥
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span><span style="color: #000000;"> set(String key, Object value) {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            redisTemplate.opsForValue().set(key, value);
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            e.printStackTrace();
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        }
    }
â€‹
    </span><span style="color: #008000;">/**</span><span style="color: #008000;">
     * æ™®é€šç¼“å­˜æ”¾å…¥å¹¶è®¾ç½®æ—¶é—´
     *
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> key   é”®
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> value å€¼
     * </span><span style="color: #808080;">@param</span><span style="color: #008000;"> time  æ—¶é—´(ç§’) timeè¦å¤§äº0 å¦‚æœtimeå°äºç­‰äº0 å°†è®¾ç½®æ— é™æœŸ
     * </span><span style="color: #808080;">@return</span><span style="color: #008000;"> trueæˆåŠŸ false å¤±è´¥
     </span><span style="color: #008000;">*/</span>
    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">boolean</span> set(String key, Object value, <span style="color: #0000ff;">long</span><span style="color: #000000;"> time) {
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            </span><span style="color: #0000ff;">if</span> (time &gt; 0<span style="color: #000000;">) {
                redisTemplate.opsForValue().set(key, value, time, TimeUnit.SECONDS);
            } </span><span style="color: #0000ff;">else</span><span style="color: #000000;"> {
                set(key, value);
            }
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">true</span><span style="color: #000000;">;
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (Exception e) {
            e.printStackTrace();
            </span><span style="color: #0000ff;">return</span> <span style="color: #0000ff;">false</span><span style="color: #000000;">;
        }
    }
 }</span></pre>
</div>
<p class="md-end-block md-p"><span class="md-plain">redisConfigé…ç½®ç±»ï¼š </span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">@Configuration
</span><span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> RedisConfig {
@Autowired
</span><span style="color: #0000ff;">private</span><span style="color: #000000;"> RedisProperties properties;
@Bean
@SuppressWarnings(</span>"all"<span style="color: #000000;">)
@ConditionalOnClass(RedisConnectionFactory.</span><span style="color: #0000ff;">class</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">public</span> RedisTemplate&lt;String, Object&gt;<span style="color: #000000;"> redisTemplate(RedisConnectionFactory factory) {
        RedisTemplate</span>&lt;String, Object&gt; template = <span style="color: #0000ff;">new</span> RedisTemplate&lt;String, Object&gt;<span style="color: #000000;">();
        template.setConnectionFactory(factory);
        Jackson2JsonRedisSerializer jackson2JsonRedisSerializer </span>= <span style="color: #0000ff;">new</span> Jackson2JsonRedisSerializer(Object.<span style="color: #0000ff;">class</span><span style="color: #000000;">);
        ObjectMapper om </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> ObjectMapper();
        om.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);
        om.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);
        jackson2JsonRedisSerializer.setObjectMapper(om);
        StringRedisSerializer stringRedisSerializer </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> StringRedisSerializer();
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> keyé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span>
<span style="color: #000000;">        template.setKeySerializer(stringRedisSerializer);
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> hashçš„keyä¹Ÿé‡‡ç”¨Stringçš„åºåˆ—åŒ–æ–¹å¼</span>
<span style="color: #000000;">        template.setHashKeySerializer(stringRedisSerializer);
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> valueåºåˆ—åŒ–æ–¹å¼é‡‡ç”¨jackson</span>
<span style="color: #000000;">        template.setValueSerializer(jackson2JsonRedisSerializer);
        </span><span style="color: #008000;">//</span><span style="color: #008000;"> hashçš„valueåºåˆ—åŒ–æ–¹å¼é‡‡ç”¨jackson</span>
<span style="color: #000000;">        template.setHashValueSerializer(jackson2JsonRedisSerializer);
        template.afterPropertiesSet();
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> template;
    }
    @Bean
    @Qualifier(</span>"redisConnectionFactory"<span style="color: #000000;">)
    </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> RedisConnectionFactory redisConnectionFactory(){
        RedisStandaloneConfiguration redisConfig </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> RedisStandaloneConfiguration();
        redisConfig.setHostName(properties.getHost());
        redisConfig.setPort(properties.getPort());
        redisConfig.setPassword(RedisPassword.of(properties.getPassword()));
        redisConfig.setDatabase(properties.getDatabase());
        </span><span style="color: #008000;">//</span><span style="color: #008000;">redisè¿æ¥æ± æ•°æ®è®¾ç½®</span>
        JedisClientConfiguration.JedisClientConfigurationBuilder builder =<span style="color: #000000;"> JedisClientConfiguration.builder();
        </span><span style="color: #0000ff;">if</span> (<span style="color: #0000ff;">this</span>.properties.getTimeout() != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            Duration timeout </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.properties.getTimeout();
            builder.readTimeout(timeout).connectTimeout(timeout);
        }
        RedisProperties.Pool pool </span>= <span style="color: #0000ff;">this</span><span style="color: #000000;">.properties.getJedis().getPool();
        </span><span style="color: #0000ff;">if</span> (pool != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            builder.usePooling().poolConfig(</span><span style="color: #0000ff;">this</span><span style="color: #000000;">.jedisPoolConfig(pool));
        }
        JedisClientConfiguration jedisClientConfiguration </span>=<span style="color: #000000;"> builder.build();
        </span><span style="color: #008000;">//</span><span style="color: #008000;">æ ¹æ®ä¸¤ä¸ªé…ç½®ç±»ç”ŸæˆJedisConnectionFactory</span>
        <span style="color: #0000ff;">return</span> <span style="color: #0000ff;">new</span><span style="color: #000000;"> JedisConnectionFactory(redisConfig,jedisClientConfiguration);
â€‹
    }
    </span><span style="color: #0000ff;">private</span><span style="color: #000000;"> JedisPoolConfig jedisPoolConfig(RedisProperties.Pool pool) {
        JedisPoolConfig config </span>= <span style="color: #0000ff;">new</span><span style="color: #000000;"> JedisPoolConfig();
        config.setMaxTotal(pool.getMaxActive());
        config.setMaxIdle(pool.getMaxIdle());
        config.setMinIdle(pool.getMinIdle());
        </span><span style="color: #0000ff;">if</span> (pool.getMaxWait() != <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
            config.setMaxWaitMillis(pool.getMaxWait().toMillis());
        }
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> config;
    }
} </span></pre>
</div>
<h2 class="md-end-block md-heading"><span class="md-plain">7.æ€»ç»“</span></h2>
<p class="md-end-block md-p"><span class="md-plain"> <span class="md-entity" data-content="&emsp;">&emsp;<span class="md-entity" data-content="&emsp;">&emsp;<span class="md-plain">å¯ä»¥æ ¹æ®çŸ­ä¿¡éªŒè¯ç™»é™†æ¨¡å¼å»å®ç°ç±»ä¼¼çš„éªŒè¯æ–¹å¼ï¼Œå¯ä»¥ç»“åˆæœ¬èŠ‚çš„ä¾‹å­è¿›è¡Œè·Ÿé¡¹ç›®ç»“åˆèµ·æ¥ï¼Œå‡å°‘å¼€å‘æ—¶é—´ã€‚åç»­è¿˜æœ‰ç¬¬ä¸‰æ–¹ç™»é™†æ–¹å¼åˆ†æä»¥æ¡ˆä¾‹ã€‚æœ€åé”™è¯¯è¯·è¯„è®ºæŒ‡å‡ºï¼ </span></span></span></span></p>
<p class="md-end-block md-p"><span class="md-plain">å¾€æœŸæ–‡ç« :</span></p>
<ul class="ul-list" data-mark="-">
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-link"><a href="https://www.cnblogs.com/Ccwwlx/p/11970392.html"><span class="md-plain">Spring security ï¼ˆä¸€ï¼‰æ¶æ„æ¡†æ¶-Componentã€Serviceã€Filteråˆ†æ</span></a></span></p>
</li>
<li class="md-list-item">
<p class="md-end-block md-p"><span class="md-link"><span class="md-plain"><a href="https://www.cnblogs.com/Ccwwlx/p/11978429.html">Spring Securityï¼ˆäºŒï¼‰--WebSecurityConfigureré…ç½®ä»¥åŠfilteré¡ºåº</a></span></span></p>
</li>
<li class="md-list-item"><a href="https://www.cnblogs.com/Ccwwlx/p/12033546.html" target="_blank"><span class="md-link"><span class="md-plain">ã€æƒé™ç®¡ç†ç³»ç»Ÿã€‘Spring securityï¼ˆä¸‰ï¼‰---è®¤è¯è¿‡ç¨‹ï¼ˆåŸç†è§£æï¼Œdemoï¼‰</span></span></a></li>
</ul>
<blockquote>
<p class="md-end-block md-p"><span class="md-plain">å„ä½çœ‹å®˜è¿˜å¯ä»¥å—ï¼Ÿå–œæ¬¢çš„è¯ï¼ŒåŠ¨åŠ¨æ‰‹æŒ‡ç‚¹ä¸ªèµğŸ’—ï¼Œç‚¹ä¸ªå…³æ³¨å‘—ï¼ï¼è°¢è°¢æ”¯æŒï¼</span></p>
<p class="md-end-block md-p"><span class="md-plain">ä¹Ÿæ¬¢è¿å…³æ³¨å…¬ä¼—å·ã€<strong>Ccwwç¬”è®°</strong><span class="md-plain">ã€‘ï¼ŒåŸåˆ›æŠ€æœ¯æ–‡ç« ç¬¬ä¸€æ—¶é—´æ¨å‡º</span></span></p>
<p class="md-end-block md-p">&nbsp;<img src="./images/[æƒé™ç®¡ç†ç³»ç»Ÿ(å››)]-spring boot +spring securityçŸ­ä¿¡è®¤è¯+redisæ•´åˆ0.png" alt="" /></p>
</blockquote>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>