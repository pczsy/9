<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python学习日记(十八) 序列化模块' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python学习日记(十八) 序列化模块</center></div><div class='banquan'>原文出处:本文由博客园博主Fantac提供。<br/>
原文连接:https://www.cnblogs.com/Fantac/p/11441326.html</div><br>
    <p><span style="font-size: 18pt; background-color: #ffffff; color: #800080; font-family: 幼圆;"><strong>什么是序列?</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">就是每一个元素被有序的排成一列</span></p>
<p><span style="font-family: 幼圆; font-size: 18pt;"><strong><span style="color: #800080;">什么是序列化?</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px; color: #000000;">就是将原本的列表、字典等内容转化成字符串的过程</span></p>
<p><span style="color: #800080; font-family: 幼圆; font-size: 18pt;"><strong>什么时候会用到序列化?</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">数据存储(把数据放在文件、数据库),网络传输等</span></p>
<p><span style="font-family: 幼圆; font-size: 18pt;"><strong><span style="color: #800080;">序列化的目的</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">1.以某种存储形式使自定义对象持久化</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">2.将对象从一个地方传递到另一个地方</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">3.使程序更具维护性</span></p>
<p>&nbsp;</p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 14pt; color: #ff0000; background-color: #ffff99;">序列化:<span style="color: #000000; font-family: 宋体; font-size: 18px; background-color: #ffffff;">数据结构转换成字符串</span></span></p>
<p><span style="font-family: 'Microsoft YaHei'; font-size: 14pt; color: #ff0000; background-color: #ffff99;">反序列化:<span style="background-color: #ffffff; color: #000000; font-family: 宋体; font-size: 18px;">字符串转换成数据结构</span></span></p>
<p>&nbsp;</p>
<p><strong><span style="font-family: 幼圆; font-size: 18pt; color: #800080;">三大序列化模块:</span></strong></p>
<p><strong><span style="font-family: 幼圆; font-size: 18pt; color: #800080;">1.Json</span></strong></p>
<p><span style="color: #ffffff; background-color: #ff0000; font-family: 宋体; font-size: 18px;"><strong>特点:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">json是一个通用的序列化格式且只有很少一部分数据(str、list、dict、tuple、数字)类型能够通过json转化成字符串</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;"><span style="font-family: 宋体;">json.dumps():</span></span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">方法使用序列化,将一个数据类型转化成字符串类型</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
dic </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>: 2,<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span>: 3<span style="color: #000000;"> }
str_d </span>=<span style="color: #000000;"> json.dumps(dic)
</span><span style="color: #0000ff;">print</span>(type(str_d),str_d)    　　<span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'str'&gt; {"k1": 2, "k2": 3}</span></pre>
</div>
<p><strong><span style="font-family: 宋体; font-size: 18px;">元祖的序列化:</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">在json这里元祖会被转成列表再去序列化</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
tu </span>= (1,<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>,[<span style="color: #800000;">'</span><span style="color: #800000;">y</span><span style="color: #800000;">'</span>,2<span style="color: #000000;">])
</span><span style="color: #0000ff;">print</span>(type(tu),tu)              <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'tuple'&gt; (1, 'a', ['y', 2])</span>
str_t =<span style="color: #000000;"> json.dumps(tu)
</span><span style="color: #0000ff;">print</span>(type(str_t),str_t)        <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'str'&gt; [1, "a", ["y", 2]]</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;"><span style="font-family: 宋体;">json.loads():</span></span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">方法使用反序列化,将一个字符串类型还原成原数据类型</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
str_d </span>= <span style="color: #800000;">'</span><span style="color: #800000;">{"k1": 2, "k2": 3}</span><span style="color: #800000;">'</span><span style="color: #000000;">
dict </span>=<span style="color: #000000;"> json.loads(str_d)
</span><span style="color: #0000ff;">print</span>(type(dict),dict)      <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'dict'&gt; {'k1': 2, 'k2': 3}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">这里字符串内部的键值要""表示,否则会报错</span></p>
<p><strong><span style="font-family: 宋体; font-size: 18px;">元祖的反序列化:</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px;">结果会转成一个列表,可以用list()方法再转成元祖</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;"><span style="font-family: 宋体;"><strong><span style="font-family: 宋体;">json.dump():</span></strong></span></span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">接收文件句柄和数据类型,再将该数据类型转换成json字符串写入文件中</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
dic </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span> : 1,<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span> : 2,<span style="color: #800000;">'</span><span style="color: #800000;">k3</span><span style="color: #800000;">'</span> : 3<span style="color: #000000;">}
with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">jsonTestfile</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    json.dump(dic,f)</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">程序执行前:</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十八) 序列化模块0.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">程序执行后:</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十八) 序列化模块1.png" alt="" width="537" height="128" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;"><span style="font-family: 宋体;">json.load():</span></span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">接收一个文件句柄,将文件中json字符串转成数据结构返回</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">jsonTestfile</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    get_str </span>=<span style="color: #000000;"> json.load(f)
</span><span style="color: #0000ff;">print</span>(get_str)      <span style="color: #008000;">#</span><span style="color: #008000;">{'k1': 1, 'k2': 2, 'k3': 3}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">如果这个文件有汉字等非ASCII的字符,文件会被写成一个bytes类型</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
dic </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">中国</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">美国</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">k3</span><span style="color: #800000;">'</span>:123,<span style="color: #800000;">'</span><span style="color: #800000;">k4</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">abc1</span><span style="color: #800000;">'</span><span style="color: #000000;">}
with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">jsonTestFile</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    json.dump(dic,f,ensure_ascii</span>=False)     <span style="color: #008000;">#</span><span style="color: #008000;">关闭ensure_ascii这样汉字就不变成乱码了</span>
with open(<span style="color: #800000;">'</span><span style="color: #800000;">jsonTestFile</span><span style="color: #800000;">'</span>,encoding=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    </span><span style="color: #0000ff;">print</span>(json.load(f))                     <span style="color: #008000;">#</span><span style="color: #008000;">{'k1': '中国', 'k2': '美国', 'k3': 123, 'k4': 'abc1'}</span></pre>
</div>
<p><span style="background-color: #ff0000; color: #ffffff; font-family: 宋体; font-size: 18px;"><strong>总结:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">在这里从文件写入一个json支持的数据类型或从中取出一个json字符串,这里用到的方法dumps\loads都是从内存中直接取出想要的数据,dump\load则都是从文件中取出想要的数据</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">前面所归纳到的方法都只能一行一行去获取数据,如果我们要多行获取:</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
l </span>= [{<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">a</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span>:<span style="color: #800000;">'</span><span style="color: #800000;">b</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">k3</span><span style="color: #800000;">'</span>:1<span style="color: #000000;">}]
</span><span style="color: #008000;">#</span><span style="color: #008000;">将每一个列表中的字典迭代获取并转成json字符串并以分行格式写入文件</span>
with open(<span style="color: #800000;">'</span><span style="color: #800000;">jsonTestFile</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    </span><span style="color: #0000ff;">for</span> dic <span style="color: #0000ff;">in</span><span style="color: #000000;"> l:
        str_dic </span>=<span style="color: #000000;"> json.dumps(dic)
        f.write(str_dic</span>+<span style="color: #800000;">'</span><span style="color: #800000;">\n</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008000;">#</span><span style="color: #008000;">打开这个文件将里面的字符串每行去换行再存入到收集器中,最后再打印结果</span>
with open(<span style="color: #800000;">'</span><span style="color: #800000;">jsonTestFile</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    colletion </span>=<span style="color: #000000;"> []
    </span><span style="color: #0000ff;">for</span> line <span style="color: #0000ff;">in</span><span style="color: #000000;"> f:
        dic </span>=<span style="color: #000000;"> json.loads(line.strip())
        colletion.append(dic)
</span><span style="color: #0000ff;">print</span>(colletion)        <span style="color: #008000;">#</span><span style="color: #008000;">[{'k1': 'a', 'k2': 'b', 'k3': 1}]</span></pre>
</div>
<p><strong><span style="font-family: 幼圆; font-size: 18pt; color: #800080;">2.Pickle</span></strong></p>
<p><span style="background-color: #ff0000; font-family: 宋体; font-size: 18px; color: #ffffff;"><strong><strong>特点:</strong></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">pickle可以将所有的python中的数据类型转成字符串形式,pickle序列化的内容只有python才能够理解,且部分序列化依赖python代码</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;">pickle.dumps()</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">将一个数据类型转换成二进制内容,这里dumps()的参数支持python内的所有数据类型</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
dic </span>= {<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>: 1,<span style="color: #800000;">'</span><span style="color: #800000;">k2</span><span style="color: #800000;">'</span>: 2,<span style="color: #800000;">'</span><span style="color: #800000;">k3</span><span style="color: #800000;">'</span>: 3<span style="color: #000000;">}
set </span>= {1,2,<span style="color: #800000;">'</span><span style="color: #800000;">s</span><span style="color: #800000;">'</span><span style="color: #000000;">}
tu </span>= (1,2,<span style="color: #800000;">'</span><span style="color: #800000;">avb</span><span style="color: #800000;">'</span><span style="color: #000000;">)
li </span>= [<span style="color: #800000;">'</span><span style="color: #800000;">k</span><span style="color: #800000;">'</span>,1,<span style="color: #800000;">'</span><span style="color: #800000;">s</span><span style="color: #800000;">'</span>,666<span style="color: #000000;">]

pstr_d </span>=<span style="color: #000000;"> pickle.dumps(dic)
</span><span style="color: #0000ff;">print</span>(type(pstr_d),pstr_d)  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'bytes'&gt; b'\x80\x03}q\x00(X\x02\x00\x00\x00k1q\x01K\x01X\x02\x00\x00\x00k2q\x02K\x02X\x02\x00\x00\x00k3q\x03K\x03u.'</span>
pstr_s =<span style="color: #000000;"> pickle.dumps(set)
</span><span style="color: #0000ff;">print</span>(type(pstr_s),pstr_s)  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'bytes'&gt; b'\x80\x03cbuiltins\nset\nq\x00]q\x01(K\x01K\x02X\x01\x00\x00\x00sq\x02e\x85q\x03Rq\x04.'</span>
pstr_t =<span style="color: #000000;"> pickle.dumps(tu)
</span><span style="color: #0000ff;">print</span>(type(pstr_t),pstr_t)  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'bytes'&gt; b'\x80\x03K\x01K\x02X\x03\x00\x00\x00avbq\x00\x87q\x01.'</span>
pstr_l =<span style="color: #000000;"> pickle.dumps(li)
</span><span style="color: #0000ff;">print</span>(type(pstr_l),pstr_l)  <span style="color: #008000;">#</span><span style="color: #008000;">&lt;class 'bytes'&gt; b'\x80\x03]q\x00(X\x01\x00\x00\x00kq\x01K\x01X\x01\x00\x00\x00sq\x02M\x9a\x02e.'</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;">pickle.loads()</span></strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">将读取到的这一个二进制文件转换为数据类型</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle
pstr_d </span>= b<span style="color: #800000;">'</span><span style="color: #800000;">\x80\x03}q\x00(X\x02\x00\x00\x00k1q\x01K\x01X\x02\x00\x00\x00k2q\x02K\x02X\x02\x00\x00\x00k3q\x03K\x03u.</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span>(pickle.loads(pstr_d))     <span style="color: #008000;">#</span><span style="color: #008000;">{'k1': 1, 'k2': 2, 'k3': 3}</span>
pstr_s = b<span style="color: #800000;">'</span><span style="color: #800000;">\x80\x03cbuiltins\nset\nq\x00]q\x01(K\x01K\x02X\x01\x00\x00\x00sq\x02e\x85q\x03Rq\x04.</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span>(pickle.loads(pstr_s))     <span style="color: #008000;">#</span><span style="color: #008000;">{1, 2, 's'}</span>
pstr_t = b<span style="color: #800000;">'</span><span style="color: #800000;">\x80\x03K\x01K\x02X\x03\x00\x00\x00avbq\x00\x87q\x01.</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span>(pickle.loads(pstr_t))     <span style="color: #008000;">#</span><span style="color: #008000;">(1, 2, 'avb')</span>
pstr_l = b<span style="color: #800000;">'</span><span style="color: #800000;">\x80\x03]q\x00(X\x01\x00\x00\x00kq\x01K\x01X\x01\x00\x00\x00sq\x02M\x9a\x02e.</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span>(pickle.loads(pstr_l))     <span style="color: #008000;">#</span><span style="color: #008000;">['k', 1, 's', 666]</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;">pickle.dump()</span></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle,time
struct_time </span>= time.gmtime(15000000<span style="color: #000000;">)
</span><span style="color: #0000ff;">print</span>(struct_time)      <span style="color: #008000;">#</span><span style="color: #008000;">time.struct_time(tm_year=1970, tm_mon=6, tm_mday=23, tm_hour=14, tm_min=40, tm_sec=0, tm_wday=1, tm_yday=174, tm_isdst=0)</span>
with open(<span style="color: #800000;">'</span><span style="color: #800000;">pickleTestFile</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">wb</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    pickle.dump(struct_time,f)</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;"><strong><span style="color: #ffffff; background-color: #ff0000;">pickle.load()</span></strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> pickle,time
struct_time </span>= time.gmtime(15000000<span style="color: #000000;">)
with open(</span><span style="color: #800000;">'</span><span style="color: #800000;">pickleTestFile</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">rb</span><span style="color: #800000;">'</span><span style="color: #000000;">) as f:
    </span><span style="color: #0000ff;">print</span>(pickle.load(f))<span style="color: #008000;">#</span><span style="color: #008000;">time.struct_time(tm_year=1970, tm_mon=6, tm_mday=23, tm_hour=14, tm_min=40, tm_sec=0, tm_wday=1, tm_yday=174, tm_isdst=0)</span></pre>
</div>
<p><strong><span style="font-family: 幼圆; font-size: 18pt; color: #800080;">3.Shelve</span></strong></p>
<p><span style="font-family: 宋体; font-size: 18px; background-color: #ff0000; color: #ffffff;"><strong>特点:</strong></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">shelve可以序列化句柄,可以使用句柄直接操作非常方便</span></p>
<p><span style="font-family: 宋体;"><span style="font-size: 18px;">直接创建一个shelve对象</span></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> shelve
f </span>= shelve.open(<span style="color: #800000;">'</span><span style="color: #800000;">shelveFile</span><span style="color: #800000;">'</span><span style="color: #000000;">)
f[</span><span style="color: #800000;">'</span><span style="color: #800000;">key</span><span style="color: #800000;">'</span>] = {<span style="color: #800000;">'</span><span style="color: #800000;">int</span><span style="color: #800000;">'</span>: 10,<span style="color: #800000;">'</span><span style="color: #800000;">float</span><span style="color: #800000;">'</span>: 15.6,<span style="color: #800000;">'</span><span style="color: #800000;">string</span><span style="color: #800000;">'</span> :<span style="color: #800000;">'</span><span style="color: #800000;">abc123</span><span style="color: #800000;">'</span><span style="color: #000000;">}
f.close()</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">固定生成三个shelve专属的文件</span></p>
<p><span style="font-family: 宋体; font-size: 18px;"><img src="./images/Python学习日记(十八) 序列化模块2.png" alt="" /></span></p>
<p><span style="font-family: 宋体; font-size: 18px;">取出存入DB中的数据</span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">import</span><span style="color: #000000;"> shelve
f </span>= shelve.open(<span style="color: #800000;">'</span><span style="color: #800000;">shelveFile</span><span style="color: #800000;">'</span><span style="color: #000000;">)
getData </span>= f[<span style="color: #800000;">'</span><span style="color: #800000;">key</span><span style="color: #800000;">'</span><span style="color: #000000;">]
f.close()
</span><span style="color: #0000ff;">print</span>(getData)      <span style="color: #008000;">#</span><span style="color: #008000;">{'int': 10, 'float': 15.6, 'string': 'abc123'}</span></pre>
</div>
<p><span style="font-family: 宋体; font-size: 18px;">由于shelve在默认情况下是不会记录待持久化对象的任何修改的,所以我们在shelve.open()时候需要修改参数,否则对象的修改不会保存</span></p>
<p><span style="font-family: 宋体; font-size: 18px;">关于shelve的学习链接:https://www.cnblogs.com/sui776265233/p/9225164.html#_label2</span></p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>