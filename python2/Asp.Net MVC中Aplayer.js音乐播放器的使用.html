<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Asp.Net MVC中Aplayer.js音乐播放器的使用' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Asp.Net MVC中Aplayer.js音乐播放器的使用</center></div><div class='banquan'>原文出处:本文由博客园博主魏杨杨提供。<br/>
原文连接:https://www.cnblogs.com/w5942066/p/12073943.html</div><br>
    <h2 id="pTitle" style="margin-left: 30px;"><span style="font-size: 14pt;">1、前言</span></h2>
<p><strong><span style="font-size: 14px;">Aplater.js是一款可爱、漂亮的Js音乐播放器，以前就了解过也弄过一些，现在就用mp3的格式来在.Net里面开发。管网&nbsp;<em><a class="homeurl" href="https://aplayer.js.org/" rel="nofollow" target="_blank">https://aplayer.js.org/</a></em></span></strong></p>
<h2 id="pTitle" style="margin-left: 30px;"><span style="font-size: 14pt;">2、入手</span></h2>
<p><strong><span style="font-size: 14px;">在项目里面只要添加一个jQuery.js跟</span><code><span class="token tag"><span class="token attr-value">APlayer.min.js 跟</span></span></code><span style="font-size: 14px;">APlayer.min.css</span><code><span class="token tag"><span class="token attr-value">就可以了。看一个简单的栗子：</span></span></code></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">link </span><span style="color: #ff0000;">rel</span><span style="color: #0000ff;">="stylesheet"</span><span style="color: #ff0000;"> href</span><span style="color: #0000ff;">="~/Scripts/AplayerJSCS/APlayer.min.css"</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="~/Scripts/jquery-3.3.1.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="~/Scripts/AplayerJSCS/APlayer.min.js"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="aplayer"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
    const ap </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> APlayer({
        container: document.getElementById(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">aplayer</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
        fixed: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,                   </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">开启吸底模式</span>
<span style="background-color: #f5f5f5; color: #000000;">        mimi: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">开启迷你模式</span>
<span style="background-color: #f5f5f5; color: #000000;">        autoplay: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音频自动播放</span>
<span style="background-color: #f5f5f5; color: #000000;">        theme: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">#b7daff</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,               </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">主题色</span>
<span style="background-color: #f5f5f5; color: #000000;">        loop: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">all</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音频循环播放, 可选值: 'all', 'one', 'none'</span>
<span style="background-color: #f5f5f5; color: #000000;">        order: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">list</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,                  </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音频循环顺序, 可选值: 'list', 'random'</span>
<span style="background-color: #f5f5f5; color: #000000;">        preload: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">auto</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,                </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">预加载，可选值: 'none', 'metadata', 'auto'</span>
<span style="background-color: #f5f5f5; color: #000000;">        volume: </span><span style="background-color: #f5f5f5; color: #000000;">0.7</span><span style="background-color: #f5f5f5; color: #000000;">,                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span>
<span style="background-color: #f5f5f5; color: #000000;">        mutex: </span><span style="background-color: #f5f5f5; color: #0000ff;">true</span><span style="background-color: #f5f5f5; color: #000000;">,                    </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</span>
        <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">customAudioType:              //自定义类型，详情</span>
<span style="background-color: #f5f5f5; color: #000000;">        listFolded: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,              </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">列表默认折叠</span>
<span style="background-color: #f5f5f5; color: #000000;">        listMaxHeight: </span><span style="background-color: #f5f5f5; color: #000000;">900</span><span style="background-color: #f5f5f5; color: #000000;">,             </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">    列表最大高度</span>
<span style="background-color: #f5f5f5; color: #000000;">        storageName: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">aplayer-setting</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">存储播放器设置的 localStorage key</span>
<span style="background-color: #f5f5f5; color: #000000;">        lrcType: </span><span style="background-color: #f5f5f5; color: #000000;">1</span><span style="background-color: #f5f5f5; color: #000000;">,                     </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">歌词文件形式1歌词直接复制进来，2 html形式，3数据库获取格式跟下面的一样</span>
        <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音频信息, 应该是一个对象或对象数组</span>
<span style="background-color: #f5f5f5; color: #000000;">        audio: [{
            name: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">全世界宣布爱你伴奏</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音乐名称</span>
<span style="background-color: #f5f5f5; color: #000000;">            artist: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">孙子涵</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">歌手</span>
<span style="background-color: #f5f5f5; color: #000000;">            url: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">/AttachFile/qsjxban.mp3</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">地址</span>
<span style="background-color: #f5f5f5; color: #000000;">            lrc: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">[ar:孙子涵、李潇潇][ti:全世界宣布爱你][00:00.09]孙子涵、李潇潇-全世界宣布爱你[00:00.84]作词：孙子涵[00:01.04]作曲：孙子涵[00:17.68]在躲过雨的香樟树下等你[00:21.87]在天桥上的转角擦肩而遇[00:26.25]制造每个邂逅的缘分累积[00:30.62]终于可以牵你的手保护你[00:35.00]有你的地方就格外的清新[00:39.29]想着你我的嘴角都会扬起[00:43.73]倾城的轮廓[00:46.25]沾满我的憧憬[00:48.47]天空都变透明[00:50.58]听到你的亲口允许[00:54.62]对全世界宣布爱你[00:58.95]我只想和你在一起[01:03.33]这颗心[01:04.44]没畏惧[01:05.50]太坚定[01:07.76]庆幸让我能够遇见你[01:12.05]就算全世界都否定[01:16.48]我也要跟你在一起[01:20.86]想牵手[01:21.92]想拥抱[01:23.03]想爱你[01:25.14]天崩地裂也要在一起[01:38.29]有你的地方就格外的清新[01:42.57]想着你我的嘴角都会扬起[01:47.11]倾城的轮廓[01:49.48]沾满我的憧憬[01:51.70]天空都变透明[01:53.86]听到你的亲口允许[01:57.84]对全世界宣布爱你[02:02.22]我只想和你在一起[02:06.59]这颗心[02:07.65]没畏惧[02:08.76]太坚定[02:11.02]庆幸让我能够遇见你[02:15.31]就算全世界都否定[02:19.69]我也要跟你在一起[02:24.03]想牵手[02:25.09]想拥抱[02:26.24]想爱你[02:28.47]天崩地裂也要在一起[02:32.94]对全世界宣布爱你[02:37.17]我只想和你在一起[02:41.50]这颗心[02:42.61]没畏惧[02:43.67]太坚定[02:45.96]庆幸让我能遇见你[02:50.34]对全世界宣布爱你[02:54.68]我只想和你在一起[02:59.01]这颗心[03:00.07]没畏惧[03:01.23]太坚定[03:03.29]庆幸让我能够遇见你[03:07.69]就算全世界都否定[03:12.02]我也要跟你在一起[03:16.40]想牵手[03:17.45]想拥抱[03:18.51]想爱你[03:20.87]天崩地裂也要在一起[03:27.22]宣布爱你[03:29.33]想在一起[03:36.55]已坚定[03:43.39]爱你[03:44.60]想在一起</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,
            cover: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">/AttachFile/qsjxban.png</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">封面图片地址</span>
<span style="background-color: #f5f5f5; color: #000000;">        }]
    });
 

</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><strong><span class="token tag"><span class="token attr-value">这是标椎的格式了，代码里面也都有注释，里面差不多的属性都在上面。&nbsp; 我填写的基本都是默认值，最简单直接的都是这样的</span></span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">const ap = new APlayer({
    container: document.getElementById('aplayer'),
    audio: [{
        name: 'name',//名称
        artist: 'artist',//艺术家
        url: 'url.mp3',//歌曲地址
        cover: 'cover.jpg'//封面地址
    }]
});</span></pre>
</div>
<p>&nbsp;</p>
<h2 id="pTitle" style="margin-left: 30px;"><span style="font-size: 14pt;">3、把音乐信息放在服务器，从数据库获取的方式</span></h2>
<p><strong><span class="token tag"><span class="token attr-value">先看数据库信息</span></span></strong></p>
<p><strong><span class="token tag"><span class="token attr-value"><img src="./images/Asp.Net MVC中Aplayer.js音乐播放器的使用0.png" alt="" /></span></span></strong></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 14px;">&nbsp;数据库简单明了，后台取数据如下，这里特别注意一下 因为前段调用只要name，artist，url，lrc，cover所以多的信息不能传过去，前台的格式又是audio:[{歌曲信息}，{歌曲信息}，{歌曲信息}，{歌曲信息}]这样的，所有后台就去这几个值，然后转Json字符串过去。</span></strong></p>
<div class="cnblogs_code">
<pre><code><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;summary&gt;</span>
        <span style="color: #808080;">///</span><span style="color: #008000;"> 获取音乐列表
        </span><span style="color: #808080;">///</span> <span style="color: #808080;">&lt;/summary&gt;</span>
        <span style="color: #808080;">///</span> <span style="color: #808080;">&lt;returns&gt;</span><span style="color: #008000;">json</span><span style="color: #808080;">&lt;/returns&gt;</span>
<span style="color: #000000;">        [HttpGet]
        </span><span style="color: #0000ff;">public</span><span style="color: #000000;"> ActionResult GetMusicList()
        {
            </span><span style="color: #0000ff;">var</span> data = db.MusicInfo.Select(it=&gt; <span style="color: #0000ff;">new</span><span style="color: #000000;"> {
                name </span>=<span style="color: #000000;"> it.Name,
                artist </span>=<span style="color: #000000;"> it.Artist,
                url </span>=<span style="color: #000000;"> it.LinkUrl,
                lrc </span>=<span style="color: #000000;"> it.Lrc,
                cover </span>=<span style="color: #000000;"> it.LinkCover,
                </span><span style="color: #008000;">//</span><span style="color: #008000;">type= "hls"</span>
<span style="color: #000000;">            }).ToList();
            </span><span style="color: #0000ff;">var</span> ret =<span style="color: #000000;"> JsonConvert.SerializeObject(data);
            </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> Json(ret,JsonRequestBehavior.AllowGet);
        }</span></pre>
</div>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h5</span><span style="color: #0000ff;">&gt;</span>音乐播放器2------&gt;数据库获取<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h5</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="aplayer2"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">type</span><span style="color: #0000ff;">="text/javascript"</span><span style="color: #0000ff;">&gt;</span>
 <span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音乐播放器2------&gt;数据库获取</span>
<span style="background-color: #f5f5f5; color: #000000;">    $(document).ready(</span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> () {
        $.ajax({
            type: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">get</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,
            url: </span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">/MusicList/GetMusicList</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">,
            async: </span><span style="background-color: #f5f5f5; color: #0000ff;">true</span><span style="background-color: #f5f5f5; color: #000000;">,
            success: </span><span style="background-color: #f5f5f5; color: #0000ff;">function</span><span style="background-color: #f5f5f5; color: #000000;"> (data) {
                </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> ret </span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;"> JSON.parse(data);
                console.log(ret);
                const app </span><span style="background-color: #f5f5f5; color: #000000;">=</span> <span style="background-color: #f5f5f5; color: #0000ff;">new</span><span style="background-color: #f5f5f5; color: #000000;"> APlayer({
                    container: document.getElementById(</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">aplayer2</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">),
                    fixed: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">吸底模式</span>
<span style="background-color: #f5f5f5; color: #000000;">                    mini: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">迷你模式</span>
<span style="background-color: #f5f5f5; color: #000000;">                    autoplay: </span><span style="background-color: #f5f5f5; color: #0000ff;">true</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">音频自动播放</span>
<span style="background-color: #f5f5f5; color: #000000;">                    lrcType: </span><span style="background-color: #f5f5f5; color: #000000;">1</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">歌词样式</span>
<span style="background-color: #f5f5f5; color: #000000;">                    preload: </span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">auto</span><span style="background-color: #f5f5f5; color: #000000;">'</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">预加载，可选值: 'none', 'metadata', 'auto'</span>
<span style="background-color: #f5f5f5; color: #000000;">                    volume: </span><span style="background-color: #f5f5f5; color: #000000;">0.7</span><span style="background-color: #f5f5f5; color: #000000;">, </span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</span>
<span style="background-color: #f5f5f5; color: #000000;">                    listFolded: </span><span style="background-color: #f5f5f5; color: #0000ff;">false</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">列表折叠</span>
<span style="background-color: #f5f5f5; color: #000000;">                    listMaxHeight: </span><span style="background-color: #f5f5f5; color: #000000;">500</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">列表最大高度</span>
<span style="background-color: #f5f5f5; color: #000000;">                    mutex: </span><span style="background-color: #f5f5f5; color: #0000ff;">true</span><span style="background-color: #f5f5f5; color: #000000;">,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</span>
<span style="background-color: #f5f5f5; color: #000000;">                    audio: ret,</span><span style="background-color: #f5f5f5; color: #008000;">//</span><span style="background-color: #f5f5f5; color: #008000;">播放列表</span>
<span style="background-color: #f5f5f5; color: #000000;">                });
            }
        });

    });
</span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p><strong><span style="font-size: 14px;">前台这样处理的。都有注释</span></strong></p>
<h2 id="pTitle" style="margin-left: 30px;"><span style="font-size: 14pt;">4、做成我博客园这样的播放器</span></h2>
<p><span style="font-size: 14px;"><strong>利用<em><a href="https://music.163.com/#" target="_blank">网</a><a href="https://music.163.com/#" target="_blank">易云</a>生</em>&nbsp;成歌单列表ID获取的形式：除主要的js，cs外之外还要多加一个js 命名看个人了，我家在下面了，主要的js。css官网有这就不贴了。这播放器还支持HLS（HTTP Live Streaming&nbsp;把整个流分成一个个小的基于 HTTP 的文件来下载，每次只下载一些）。官网也有api。我试了一下，就不介绍了。</strong></span></p>
<div class="cnblogs_code">
<pre><code>'use strict'<span style="color: #000000;">;
console.log(</span>'\n %c MetingJS v1.2.0 %c https://github.com/metowolf/MetingJS \n', 'color: #fadfa3; background: #030307; padding:5px 0;', 'background: #fadfa3; padding:5px 0;'<span style="color: #000000;">);
</span><span style="color: #0000ff;">var</span> aplayers =<span style="color: #000000;"> [],
    loadMeting </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
        </span><span style="color: #0000ff;">function</span><span style="color: #000000;"> a(a, b) {
            </span><span style="color: #0000ff;">var</span> c =<span style="color: #000000;"> {
                container: a,
                audio: b,
                mini: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                fixed: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                autoplay: </span>!1<span style="color: #000000;">,
                mutex: </span>!0<span style="color: #000000;">,
                lrcType: </span>3<span style="color: #000000;">,
                listFolded: </span>!1<span style="color: #000000;">,
                preload: </span>'auto'<span style="color: #000000;">,
                theme: </span>'#2980b9'<span style="color: #000000;">,
                loop: </span>'all'<span style="color: #000000;">,
                order: </span>'list'<span style="color: #000000;">,
                volume: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                listMaxHeight: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                customAudioType: </span><span style="color: #0000ff;">null</span><span style="color: #000000;">,
                storageName: </span>'metingjs'<span style="color: #000000;">
            };
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (b.length) {
                b[</span>0].lrc || (c.lrcType = 0<span style="color: #000000;">);
                </span><span style="color: #0000ff;">var</span> d =<span style="color: #000000;"> {};
                </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> e <span style="color: #0000ff;">in</span><span style="color: #000000;"> c) {
                    </span><span style="color: #0000ff;">var</span> f =<span style="color: #000000;"> e.toLowerCase();
                    (a.dataset.hasOwnProperty(f) </span>|| a.dataset.hasOwnProperty(e) || <span style="color: #0000ff;">null</span> !== c[e]) &amp;&amp; (d[e] = a.dataset[f] || a.dataset[e] || c[e], ('true' === d[e] || 'false' === d[e]) &amp;&amp; (d[e] = 'true' ==<span style="color: #000000;"> d[e]))
                }
                aplayers.push(</span><span style="color: #0000ff;">new</span><span style="color: #000000;"> APlayer(d))
            }
        }
        </span><span style="color: #0000ff;">var</span> b = 'https://api.i-meto.com/meting/api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r'<span style="color: #000000;">;
        </span>'undefined' != <span style="color: #0000ff;">typeof</span> meting_api &amp;&amp; (b =<span style="color: #000000;"> meting_api);
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> f = 0; f &lt; aplayers.length; f++<span style="color: #000000;">)
        </span><span style="color: #0000ff;">try</span><span style="color: #000000;"> {
            aplayers[f].destroy()
        } </span><span style="color: #0000ff;">catch</span><span style="color: #000000;"> (a) {
            console.log(a)
        }
        aplayers </span>=<span style="color: #000000;"> [];
        </span><span style="color: #0000ff;">for</span> (<span style="color: #0000ff;">var</span> c = document.querySelectorAll('.aplayer'), d = <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
            </span><span style="color: #0000ff;">var</span> d =<span style="color: #000000;"> c[e],
                f </span>=<span style="color: #000000;"> d.dataset.id;
            </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> (f) {
                    </span><span style="color: #0000ff;">var</span> g = d.dataset.api ||<span style="color: #000000;"> b;
                    g </span>= g.replace(':server'<span style="color: #000000;">, d.dataset.server),
                    g </span>= g.replace(':type'<span style="color: #000000;">, d.dataset.type),
                    g </span>= g.replace(':id'<span style="color: #000000;">, d.dataset.id),
                    g </span>= g.replace(':auth'<span style="color: #000000;">, d.dataset.auth),
                    g </span>= g.replace(':r'<span style="color: #000000;">, Math.random());
                    </span><span style="color: #0000ff;">var</span> h = <span style="color: #0000ff;">new</span><span style="color: #000000;"> XMLHttpRequest;
                    h.onreadystatechange </span>= <span style="color: #0000ff;">function</span><span style="color: #000000;"> () {
                        </span><span style="color: #0000ff;">if</span> (4 === h.readyState &amp;&amp; (200 &lt;= h.status &amp;&amp; 300 &gt; h.status || 304 ===<span style="color: #000000;"> h.status)) {
                            </span><span style="color: #0000ff;">var</span> b =<span style="color: #000000;"> JSON.parse(h.responseText);
                            a(d, b)
                        }
                    },
                    h.open(</span>'get', g, !0<span style="color: #000000;">),
                    h.send(</span><span style="color: #0000ff;">null</span><span style="color: #000000;">)
                } </span><span style="color: #0000ff;">else</span> <span style="color: #0000ff;">if</span><span style="color: #000000;"> (d.dataset.url) {
                    </span><span style="color: #0000ff;">var</span> i =<span style="color: #000000;"> [{
                        name: d.dataset.name </span>|| d.dataset.title || 'Audio name'<span style="color: #000000;">,
                        artist: d.dataset.artist </span>|| d.dataset.author || 'Audio artist'<span style="color: #000000;">,
                        url: d.dataset.url,
                        cover: d.dataset.cover </span>||<span style="color: #000000;"> d.dataset.pic,
                        lrc: d.dataset.lrc,
                        type: d.dataset.type </span>|| 'auto'<span style="color: #000000;">
                    }];
                    a(d, i)
                }
        }, e </span>= 0; e &lt; c.length; e++<span style="color: #000000;">)
        d()
    };
document.addEventListener(</span>'DOMContentLoaded', loadMeting, !1);</pre>
</div>
<p><span style="font-size: 14px;"><strong>HTML代码，属性油性漆的自己研究看看 。</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">h5</span><span style="color: #0000ff;">&gt;</span>音乐播放器3------&gt;获取外部链接（网易云这里）-------&gt;左下角的播放器<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">h5</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">div </span><span style="color: #ff0000;">id</span><span style="color: #0000ff;">="aplayer"</span><span style="color: #ff0000;"> class</span><span style="color: #0000ff;">="aplayer"</span><span style="color: #ff0000;"> data-id</span><span style="color: #0000ff;">="歌单列表ID"</span><span style="color: #ff0000;"> data-server</span><span style="color: #0000ff;">="netease"</span><span style="color: #ff0000;"> data-type</span><span style="color: #0000ff;">="playlist"</span><span style="color: #ff0000;"> data-fixed</span><span style="color: #0000ff;">="true"</span><span style="color: #ff0000;"> data-listfolded</span><span style="color: #0000ff;">="true"</span><span style="color: #ff0000;"> data-order</span><span style="color: #0000ff;">="random"</span><span style="color: #ff0000;"> data-theme</span><span style="color: #0000ff;">="#F58EA8"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">div</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>&nbsp;</p>
<p><span style="font-size: 14px;"><strong>&nbsp;这个区网易云 登录上去，把喜欢的歌曲弄在一个收藏列表，然后点击个人中心----&gt;我的主页------&gt;歌单选择-----&gt;列表<a class="des s-fc7" data-action="outchain" data-href="/outchain/0/3114856081/">生成外链播放器(不要点击我的音乐进去 没有那个链接真的坑^_^)，生成以后拉到最下面，有个HTML代码把里面的ID搞过来就可以了</a></strong></span></p>
<p><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/Asp.Net MVC中Aplayer.js音乐播放器的使用1.png" alt="" /></p>
<p><strong><span style="font-size: 14px;">有兴趣的可以试试，看看效果。</span></strong></p>
<p><strong><span style="font-size: 14px;">&nbsp;</span></strong><img style="display: block; margin-left: auto; margin-right: auto;" src="./images/Asp.Net MVC中Aplayer.js音乐播放器的使用2.png" alt="" /></p>
<p>&nbsp;</p>
<p><strong><span style="font-size: 16px;">&nbsp;我以前写的一个网址 有情趣的看看效果，这个就是上面数据库里面的&nbsp; <em><a href="http://www.yijianlan.com:8066/" target="_blank">&nbsp;http://www.yijianlan.com:8066/</a>&nbsp;</em></span></strong></p>
<h2 id="pTitle" style="margin-left: 30px;"><span style="font-size: 14pt;">5、播放器的相关API</span></h2>
<ul>
<li>
<p><strong><span style="font-size: 14px;"><code>APlayer.version</code>: 静态属性, 返回 APlayer 的版本号</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.play()</code>: 播放音频</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.pause()</code>: 暂停音频</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.seek(time: number)</code>: 跳转到特定时间，时间的单位为秒</span></strong></p>
<pre data-lang="js"><strong><span style="font-size: 14px;"><code>ap.seek(100);
</code></span></strong></pre>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.toggle()</code>: 切换播放和暂停</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.on(event: string, handler: function)</code>: 绑定音频和播放器事件，详情</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.volume(percentage: number, nostorage: boolean)</code>: 设置音频音量</span></strong></p>
<pre data-lang="js"><strong><span style="font-size: 14px;"><code>ap.volume(0.1, true);
</code></span></strong></pre>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.theme(color: string, index: number)</code>: 设置播放器主题色, index 默认为当前音频的 index</span></strong></p>
<pre data-lang="js"><strong><span style="font-size: 14px;"><code>ap.theme('#000', 0);
</code></span></strong></pre>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.setMode(mode: string)</code>: 设置播放器模式，mode 取值应为 'mini' 或 'normal'</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.mode</code>: 返回播放器当前模式，'mini' 或 'normal'</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.notice(text: string, time: number, opacity: number)</code>: 显示通知，时间的单位为毫秒，默认时间 2000 毫秒，默认透明度 0.8，设置时间为 0 可以取消通知自动隐藏</span></strong></p>
<pre data-lang="js"><strong><span style="font-size: 14px;"><code>ap.notice('Amazing player', 2000, 0.8);
</code></span></strong></pre>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.skipBack()</code>: 切换到上一首音频</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.skipForward()</code>: 切换到下一首音频</span></strong></p>
</li>
<li>
<p><strong><span style="font-size: 14px;"><code>ap.destroy()</code>: 销毁播放器</span></strong></p>
</li>
<li>
<p><strong><code>ap.lrc</code></strong></p>
<ul>
<li>
<p><strong><code>ap.lrc.show()</code>: 显示歌词</strong></p>
</li>
<li>
<p><strong><code>ap.lrc.hide()</code>: 隐藏歌词</strong></p>
</li>
<li>
<p><strong><code>ap.lrc.toggle()</code>: 显示/隐藏歌词</strong></p>
</li>
</ul>
</li>
<li>
<p><code>ap.list</code></p>
<ul>
<li>
<p><strong><code>ap.list.show()</code>: 显示播放列表</strong></p>
</li>
<li>
<p><strong><code>ap.list.hide()</code>: 隐藏播放列表</strong></p>
</li>
<li>
<p><strong><code>ap.list.toggle()</code>: 显示/隐藏播放列表</strong></p>
</li>
<li>
<p><strong><code>ap.list.add(audios: array | object)</code>: 添加一个或几个新音频到播放列表</strong></p>
</li>
</ul>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">ap.list.add([{
    name: </span>'name'<span style="color: #000000;">,
    artist: </span>'artist'<span style="color: #000000;">,
    url: </span>'url.mp3'<span style="color: #000000;">,
    cover: </span>'cover.jpg'<span style="color: #000000;">,
    lrc: </span>'lrc.lrc'<span style="color: #000000;">,
    theme: </span>'#ebd0c2'<span style="color: #000000;">
}]);</span></pre>
</div>
<p>&nbsp;</p>
<ul>
<li><strong><code>ap.list.remove(index: number)</code>: 移除播放列表中的一个音频</strong></li>
</ul>
<pre data-lang="js"><strong><code>ap.list.remove(1);
</code></strong></pre>
<ul>
<li><strong><code>ap.list.switch()</code>: 切换到播放列表里的其他音频</strong></li>
</ul>
<pre data-lang="js"><strong><code>ap.list.switch(1);
</code></strong></pre>
<ul>
<li><strong><code>ap.list.clear()</code>: 清空播放列表</strong></li>
</ul>
</li>
<li>
<p><strong><code>ap.audio</code>: 原生 audio</strong></p>
<ul>
<li>
<p><strong><code>ap.audio.currentTime</code>: 返回音频当前播放时间</strong></p>
</li>
<li>
<p><strong><code>ap.audio.duration</code>: 返回音频总时间</strong></p>
</li>
<li>
<p><strong><code>ap.audio.paused</code>: 返回音频是否暂停</strong></p>
</li>
<li>
<p><strong>支持大多原生audio接口</strong><a href="http://www.w3schools.com/tags/ref_av_dom.asp" target="_blank"><br /></a></p>









</li>









</ul>









</li>









</ul>
<p><strong><span style="font-size: 14px;">&nbsp;</span></strong></p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>