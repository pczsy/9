<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python规范代码规范要注意' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python规范代码规范要注意</center></div><div class='banquan'>原文出处:本文由博客园博主秋官提供。<br/>
原文连接:https://www.cnblogs.com/xiaoguanqiu/p/11269255.html</div><br>
    <h3>主要有以下两种代码规范</h3>
<div>
<ul>
<li>《8 号 Python 增强规范》（Python Enhacement Proposal #8），以下简称 PEP8；</li>
<li>《Google Python 风格规范》（Google Python Style Guide），以下简称 Google Style，这是源自 Google 内部的风格规范。公开发布的社区版本，是为了让 Google 旗下所有 Python 开源项目的编程风格统一。（http://google.github.io/styleguide/pyguide.html）</li>
<li>&nbsp;Google&nbsp;&nbsp;Python Style Guide&nbsp;要更严格些。</li>
</ul>
<h3><span style="font-size: 1.17em;">统一的编程规范为什么重要？</span></h3>
<p><span style="font-size: 1.17em;">　　</span>开发效率，关乎三类对象，也就是阅读者、编程者和机器。他们的优先级是阅读者的体验 &gt;&gt; 编程者的体验 &gt;&gt; 机器的体验。</p>
<h4>阅读者的体验 &gt;&gt; 编程者的体验</h4>
<p>　　不少的编程规范，本来就是为了优化读者体验而存在的。举个例子，对于命名原则，我想很多人应该都有所理解，PEP8 第 38 条规定命名必须有意义，不能是无意义的单字母。如:</p>
<div class="cnblogs_code">
<pre><code><span style="color: #000000;">错误示例
</span><span style="color: #0000ff;">if</span> (a &lt;=<span style="color: #000000;"> 0):
   </span><span style="color: #0000ff;">return</span>
<span style="color: #0000ff;">elif</span> (a &gt;<span style="color: #000000;"> b):
   </span><span style="color: #0000ff;">return</span>
<span style="color: #0000ff;">else</span><span style="color: #000000;">:
  b </span>-=<span style="color: #000000;"> a

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 正确示例</span>
<span style="color: #0000ff;">if</span> (transfer_amount &lt;=<span style="color: #000000;"> 0):
   </span><span style="color: #0000ff;">raise</span> Exception(<span style="color: #800000;">'</span><span style="color: #800000;">...</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">elif</span> (transfer_amount &gt;<span style="color: #000000;"> balance):
   </span><span style="color: #0000ff;">raise</span> Exception(<span style="color: #800000;">'</span><span style="color: #800000;">...</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
  balance </span>-= transfer_amount</pre>
</div>
<p>　　再举一个例子，Google Style 2.2 条规定，Python 代码中的 import 对象，只能是 package 或者 module。</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">错误示例</span>
<span style="color: #0000ff;">from</span> mypkg <span style="color: #0000ff;">import</span><span style="color: #000000;"> Obj
</span><span style="color: #0000ff;">from</span> mypkg <span style="color: #0000ff;">import</span><span style="color: #000000;"> my_func

my_func([</span>1, 2, 3<span style="color: #000000;">])

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 正确示例</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> numpy as np
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> mypkg

np.array([</span>6, 7, 8])</pre>
</div>
<h4>编程者的体验 &gt;&gt; 机器的体验</h4>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">错误示例</span>
result = [(x, y) <span style="color: #0000ff;">for</span> x <span style="color: #0000ff;">in</span> range(10) <span style="color: #0000ff;">for</span> y <span style="color: #0000ff;">in</span> range(5) <span style="color: #0000ff;">if</span> x * y &gt; 10]</pre>
</div>
<div>　　以上的代码看起来又累又费劲，转个头可能自已也得看半天。换成简单的for loop,就可以更简洁与明了。</div>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 正确示例</span>
result =<span style="color: #000000;"> []
</span><span style="color: #0000ff;">for</span> x <span style="color: #0000ff;">in</span> range(10<span style="color: #000000;">):
  </span><span style="color: #0000ff;">for</span> y <span style="color: #0000ff;">in</span> range(5<span style="color: #000000;">):
     </span><span style="color: #0000ff;">if</span> x * y &gt; 10<span style="color: #000000;">:
       result.append((x, y))</span></pre>
</div>
<h4>&nbsp;机器的体验也很重要</h4>
<p>&nbsp;　　一些危险的编程风格，不仅会影响程序正确性，也容易成为代码效率的瓶颈。比如， is 和 ==的使用区别。is是比较对象的内存地址。因此在比较整数的地址时要注意。</p>
<p>&nbsp;</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">################实验证明，下面代码只在终端中执行Python命令行时才有效，而在执行脚本时整型的数据都会分配同一个空间</span><span style="color: #008000;">
#</span><span style="color: #008000;">错误示例</span>
x = 27<span style="color: #000000;">
y </span>= 27
<span style="color: #0000ff;">print</span>(x <span style="color: #0000ff;">is</span> y) <span style="color: #008000;">#</span><span style="color: #008000;">True</span>
<span style="color: #000000;">
x </span>= 721<span style="color: #000000;">
y </span>= 721
<span style="color: #0000ff;">print</span>(x <span style="color: #0000ff;">is</span> y) <span style="color: #008000;">#</span><span style="color: #008000;">False</span><span style="color: #008000;">
#</span><span style="color: #008000;">以上的代码的改成==,确保是对比对象的值。</span><span style="color: #008000;">
#</span><span style="color: #008000;">正确示例</span>
x = 27<span style="color: #000000;">
y </span>= 27
<span style="color: #0000ff;">print</span>(x ==<span style="color: #000000;"> y)

x </span>= 721<span style="color: #000000;">
y </span>= 721
<span style="color: #0000ff;">print</span>(x == y)</pre>
</div>
<p>　　再看 == ，当比较的是对象或者None时，有可能就会出乎意料，因为==的结果，取决于__eq__() 方法的具体实现</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;">错误示例</span>
<span style="color: #0000ff;">class</span><span style="color: #000000;"> MyObject(object):
    </span><span style="color: #0000ff;">def</span> <span style="color: #800080;">__eq__</span><span style="color: #000000;">(self, other):
        </span><span style="color: #0000ff;">if</span><span style="color: #000000;"> other:
            </span><span style="color: #0000ff;">return</span> self.field ==<span style="color: #000000;"> other.field
        </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> True

x </span>=<span style="color: #000000;"> MyObject()
</span><span style="color: #0000ff;">print</span>(x == None)</pre>
</div>
<p>　　如果要与None比较时，永远要使用is和is not</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 正确示例</span>
x =<span style="color: #000000;"> MyObject()
</span><span style="color: #0000ff;">print</span>(x <span style="color: #0000ff;">is</span><span style="color: #000000;"> None)
正确示例
</span><span style="color: #0000ff;">def</span> pay(name, salary=<span style="color: #000000;">None):
 </span><span style="color: #0000ff;">if</span> salary <span style="color: #0000ff;">is</span> <span style="color: #0000ff;">not</span><span style="color: #000000;"> None:
   salary </span>= 11
 <span style="color: #0000ff;">print</span>(name, <span style="color: #800000;">"</span><span style="color: #800000;">is compensated</span><span style="color: #800000;">"</span>, salary, <span style="color: #800000;">"</span><span style="color: #800000;">dollars</span><span style="color: #800000;">"</span>)</pre>
</div>
<p>　　再提一个错误示范</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#错</span><span style="color: #008000;">误示例</span>
adict = {i: i * 2 <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> xrange(10000000<span style="color: #000000;">)}

</span><span style="color: #0000ff;">for</span> key <span style="color: #0000ff;">in</span><span style="color: #000000;"> adict.keys():
   </span><span style="color: #0000ff;">print</span>(<span style="color: #800000;">"</span><span style="color: #800000;">{0} = {1}</span><span style="color: #800000;">"</span>.format(key, adict[key]))</pre>
</div>
<p>　　keys() 方法会在遍历前生成一个临时的列表，导致上面的代码消耗大量内存并且运行缓慢。正确的方式，是使用默认的 iterator。默认的 iterator 不会分配新内存，也就不会造成上面的性能问题:</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">#</span><span style="color: #008000;"> 正确示例</span>
<span style="color: #0000ff;">for</span> key <span style="color: #0000ff;">in</span> adict:</pre>
</div>
<h3>参考</h3>
<p>　　摘自 《Python核心技术与实战》专栏</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
</div>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>