<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修Python【day 12】生成器和推导式' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>Python【day 12】生成器和推导式</center></div><div class='banquan'>原文出处:本文由博客园博主cn5036518提供。<br/>
原文连接:https://www.cnblogs.com/wangtp/p/11630913.html</div><br>
    <pre><code><span style="font-size: 15px;"><strong>一、生成器和生成器函数<br />1、生成器和生成器函数的概念</strong></span><br /><span style="font-size: 15px;">    1、生成器的本质是迭代器</span><br /><span style="font-size: 15px;">    2、函数中包含yield，就是生成器函数</span><br /><br /><span style="font-size: 15px;"><strong>2、生成器函数的写法</strong></span><br /><span style="font-size: 15px;">    def func():</span><br /><span style="font-size: 15px;">        a =10</span><br /><span style="font-size: 15px;">        yield 20</span><br /><span style="font-size: 15px;">    gen = func()  #没有执行，而是生成一个生成器</span><br /><span style="font-size: 15px;">    普通函数和生成器函数的不同</span><br /><span style="font-size: 15px;">    1、普通函数名()表示函数的的执行</span><br /><span style="font-size: 15px;">    2、生成器函数名()不是函数的执行，而是生成一个生成器</span><br /><br /><span style="font-size: 15px;">    yield和return的不同</span><br /><span style="font-size: 15px;">    1、retun表示返回，同时函数执行终止，return之后的代码不会执行</span><br /><span style="font-size: 15px;">    2、yield也表示返回，函数暂停，函数分段执行</span><br /><br /><span style="font-size: 15px;">    def func():</span><br /><span style="font-size: 15px;">        a =10</span><br /><span style="font-size: 15px;">        yield 20</span><br /><span style="font-size: 15px;">        b = 30</span><br /><span style="font-size: 15px;">        yield 40</span><br /><span style="font-size: 15px;">    gen = func()  #生成一个生成器</span><br /><span style="font-size: 15px;">    gen.__next__() #返回20 执行到第一个yield</span><br /><span style="font-size: 15px;">    gen.__next__() #返回40 从第一个yeild开始执行到第二个yield</span><br /><br /><strong><span style="font-size: 15px;">3、如何得到生成器</span></strong><br /><span style="font-size: 15px;">    1、生成器函数</span><br /><span style="font-size: 15px;">       生成器函数名()</span><br /><span style="font-size: 15px;">    2、生成器表达式</span><br /><span style="font-size: 15px;">    3、类型转换</span><br /><br /><strong><span style="font-size: 15px;">4、生成器的特点</span></strong><br /><span style="font-size: 15px;">    1、节省内存</span><br /><span style="font-size: 15px;">    2、惰性机制（每执行一次__next__（）方法，取值一次）</span><br /><span style="font-size: 15px;">    3、只能向前取值，不能退后</span><br /><br /><strong><span style="font-size: 15px;">5、生成器的取值</span></strong><br /><span style="font-size: 15px;">    __next__()方法和send()方法的区别</span><br /><span style="font-size: 15px;">       前者表示向下取值</span><br /><span style="font-size: 15px;">       后者除了表示向下取值，还可以给上一个yield传递值</span><br /><span style="font-size: 15px;">       注意：send()方法不能用在第一个取值，第一个取值只能用__next__()</span><br /><span style="font-size: 15px;">            最后一个yield也不能用send()</span><br /><br /><strong><span style="font-size: 15px;">6、生成器的好处</span></strong><br /><span style="font-size: 15px;">    节约内存</span><br /><span style="font-size: 15px;">'''</span><br /><br /><strong><span style="font-size: 15px;">#关于__next__()方法和send()方法的例子</span></strong><br /><span style="font-size: 15px;">def func():</span><br /><span style="font-size: 15px;">    a = 1</span><br /><span style="font-size: 15px;">    a2 = yield 2</span><br /><span style="font-size: 15px;">    print(a2)</span><br /><span style="font-size: 15px;">    c = 3</span><br /><span style="font-size: 15px;">    c2 = yield 4</span><br /><span style="font-size: 15px;">    print(c2)</span><br /><span style="font-size: 15px;">    yield 5</span><br /><span style="font-size: 15px;">gen = func() #生成一个生成器</span><br /><span style="font-size: 15px;">gen.__next__()  #执行到了第一个yield</span><br /><span style="font-size: 15px;">gen.send('test') #把参数传递到第一个yield</span><br /><span style="font-size: 15px;">gen.send('娃哈哈') #把参数传递到第2个yield</span><br /><br /><strong><span style="font-size: 15px;">#生成器的好处-节约内存的例子</span></strong><br /><span style="font-size: 15px;">#一次性买100件衣服，需要地方保存，比较浪费内存</span><br /><span style="font-size: 15px;">li1 = []</span><br /><span style="font-size: 15px;">def func2():</span><br /><span style="font-size: 15px;">    for i in range(1,11):</span><br /><span style="font-size: 15px;">        li1.append('衣服 %s' % i)</span><br /><span style="font-size: 15px;">    return li1</span><br /><span style="font-size: 15px;">ret = func2()</span><br /><span style="font-size: 15px;">print(ret)  #100件衣服一次性生成出来，放到列表到了</span><br /><span style="font-size: 15px;">print('----------1')</span><br /><br /><span style="font-size: 15px;">#最好的方式是下一个100件衣服的订单，但是呢，需要一件，送一件，就不需要专门的地方保存了，节约内存</span><br /><strong><span style="font-size: 15px;">#方法1 生成器函数</span></strong><br /><span style="font-size: 15px;">def func3():</span><br /><span style="font-size: 15px;">    for i in range(1,11):</span><br /><span style="font-size: 15px;">        yield ('衣服 %s' %i)</span><br /><span style="font-size: 15px;">gen = func3()  #生成一个生成器</span><br /><span style="font-size: 15px;">print(gen.__next__()) #第一件</span><br /><span style="font-size: 15px;">print(gen.__next__()) #第二件</span><br /><span style="font-size: 15px;">for i in gen: #生成器本质是迭代器，支持for循环</span><br /><span style="font-size: 15px;">    print(i)</span><br /><br /><strong><span style="font-size: 15px;">#方法2 生成器表达式</span></strong><br /><span style="font-size: 15px;"># gen = (i for i in range(1,11))</span><br /><span style="font-size: 15px;"># print(gen)  #生成一个生成器（类比：就是买衣服订单）</span><br /><span style="font-size: 15px;"># print(gen.__next__()) #第一件</span><br /><span style="font-size: 15px;"># print(gen.__next__()) #第二件</span><br /><span style="font-size: 15px;"># for i in gen: #生成器本质是迭代器，支持for循环</span><br /><span style="font-size: 15px;">#     print(i)</span><br /><br /><strong><span style="font-size: 15px;">二、推导式</span></strong></pre>
<pre><code><span style="font-size: 15px;"><strong>推导式</strong>（列表推导式，字典推导式等）</span><br /><span style="font-size: 15px;">1、列表推导式：[结果       for循环 if条件]</span><br /><span style="font-size: 15px;">2、字典推导式：{key: value for循环 if条件}</span><br /><span style="font-size: 15px;">3、集合推导式：{key        for循环 if条件}</span><br /><span style="font-size: 15px;">注意：没有元组推导式</span><br /><br /><strong><span style="font-size: 15px;">三、生成器表达式</span></strong></pre>
<pre><code><span style="font-size: 15px;">1、生成器表达式：（结果 for循环 if条件）</span><br /><span style="font-size: 15px;">2、惰性机制（类比：弹夹没子弹了，不能将同一个值，生成2次）</span><br /><span style="font-size: 15px;">   生成器是记录在内存中的一段代码，产生的时候，没有执行</span><br /><br /><span style="font-size: 15px;">生成器表达式和列表推导式的区别类比：</span><br /><span style="font-size: 15px;">1、买100个鸡蛋，列表推导式：是一次性把100个鸡蛋买回来，需要地方存储</span><br /><span style="font-size: 15px;">2、            生成器表达式：是买一只母鸡，需要鸡蛋就给下蛋</span></pre>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>