<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修JavaScript获取Django模板中指定键值的数据，使用过滤器' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>JavaScript获取Django模板中指定键值的数据，使用过滤器</center></div><div class='banquan'>原文出处:本文由博客园博主破竹提供。<br/>
原文连接:https://www.cnblogs.com/pozhu15/p/11328691.html</div><br>
    <p>Django中利用js来操作数据的常规操作一般为点(.)操作符来获取字典或列表的数据，一般如{{data.0}}，{{data.arg}}</p>
<p>但有时如果数据是嵌套类型的数据时，直接获取某个值就变得困难了，比如下面的格式要获取</p>
<pre><code>correct中qxl的值</pre>
<div class="cnblogs_code">
<pre><code>startArgsSet={<span style="color: #800000;">"</span><span style="color: #800000;">correct</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">reliable</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">security</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">understand</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">entropy</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span><span style="color: #000000;">:0},
</span><span style="color: #800000;">"</span><span style="color: #800000;">mature</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">active</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">service</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">file</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span><span style="color: #000000;">:0},
</span><span style="color: #800000;">"</span><span style="color: #800000;">tech</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">property</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">organize</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">develop</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span><span style="color: #000000;">:0},
</span><span style="color: #800000;">"</span><span style="color: #800000;">source</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">update</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">fix</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span><span style="color: #000000;">:0},
</span><span style="color: #800000;">"</span><span style="color: #800000;">quality</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">meanNum</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span>:0},<span style="color: #800000;">"</span><span style="color: #800000;">variance</span><span style="color: #800000;">"</span>:{<span style="color: #800000;">"</span><span style="color: #800000;">qxl</span><span style="color: #800000;">"</span>:0,<span style="color: #800000;">"</span><span style="color: #800000;">kkx</span><span style="color: #800000;">"</span><span style="color: #000000;">:0}
}</span></pre>
</div>
<p>这时候如果改变数据格式为列表中的无嵌套字典格式比较麻烦，可以自定义过滤器来获取数据，</p>
<div class="cnblogs_code">
<pre><code><span style="color: #0000ff;">from</span> django.template.defaulttags <span style="color: #0000ff;">import</span><span style="color: #000000;"> register</span><span style="color: #000000;">

@register.filter
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> getArgQxlValue(dictionary,arg):
    </span><span style="color: #0000ff;">return</span> dictionary[arg][<span style="color: #800000;">'</span><span style="color: #800000;">qxl</span><span style="color: #800000;">'</span><span style="color: #000000;">]
    
@register.filter
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> getArgKkxValue(dictionary,arg):
    </span><span style="color: #0000ff;">return</span> dictionary[arg][<span style="color: #800000;">'</span><span style="color: #800000;">kkx</span><span style="color: #800000;">'</span><span style="color: #000000;">]
    
@register.filter
</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> getArgName(dictionary,arg):
    </span><span style="color: #0000ff;">return</span> dictionary[arg][<span style="color: #800000;">'</span><span style="color: #800000;">name</span><span style="color: #800000;">'</span>]</pre>
</div>
<p>在模板中就可以以这样写</p>
<div class="cnblogs_code">
<pre><code><span style="color: #008000;">&lt;!--</span><span style="color: #008000;"> the second important page of the project</span><span style="color: #008000;">--&gt;</span><span style="color: #000000;">
{% load staticfiles %}

</span><span style="color: #0000ff;">&lt;!</span><span style="color: #ff00ff;">DOCTYPE html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">meta </span><span style="color: #ff0000;">charset</span><span style="color: #0000ff;">="utf-8"</span><span style="color: #0000ff;">&gt;</span>
    <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>超标信息<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">title</span><span style="color: #0000ff;">&gt;</span>

     <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script </span><span style="color: #ff0000;">src</span><span style="color: #0000ff;">="{% static 'js/a-mynewjs.js' %}"</span><span style="color: #0000ff;">&gt;&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">head</span><span style="color: #0000ff;">&gt;</span>

<span style="color: #0000ff;">&lt;</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">

  {{ guestSetArgs|safe }}</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">br</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">br</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">br</span><span style="color: #0000ff;">&gt;</span><span style="color: #000000;">
  
  {{ warningdata|safe }}</span><span style="color: #0000ff;">&lt;</span><span style="color: #800000;">br</span><span style="color: #0000ff;">&gt;&lt;</span><span style="color: #800000;">br</span><span style="color: #0000ff;">&gt;</span>
  
  <span style="color: #0000ff;">&lt;</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">
  {</span><span style="background-color: #f5f5f5; color: #000000;">%</span> <span style="background-color: #f5f5f5; color: #0000ff;">for</span><span style="background-color: #f5f5f5; color: #000000;"> i </span><span style="background-color: #f5f5f5; color: #0000ff;">in</span><span style="background-color: #f5f5f5; color: #000000;"> guestSetArgs </span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;">}
    {</span><span style="background-color: #f5f5f5; color: #000000;">%</span> <span style="background-color: #f5f5f5; color: #0000ff;">for</span><span style="background-color: #f5f5f5; color: #000000;"> j </span><span style="background-color: #f5f5f5; color: #0000ff;">in</span><span style="background-color: #f5f5f5; color: #000000;"> warningdata </span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;">} 
       </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">{{i}}</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">==</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">{{j}}</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">)
       {
           </span><span style="background-color: #f5f5f5; color: #0000ff;">if</span><span style="background-color: #f5f5f5; color: #000000;">(Number({{warningdata</span><span style="background-color: #f5f5f5; color: #000000;">|</span><span style="background-color: #f5f5f5; color: #000000;">getArgQxlValue:j}})</span><span style="background-color: #f5f5f5; color: #000000;">&gt;</span><span style="background-color: #f5f5f5; color: #000000;">Number({{guestSetArgs</span><span style="background-color: #f5f5f5; color: #000000;">|</span><span style="background-color: #f5f5f5; color: #000000;">getArgQxlValue:i}}))
           </span><span style="background-color: #f5f5f5; color: #0000ff;">var</span><span style="background-color: #f5f5f5; color: #000000;"> setArgStr</span><span style="background-color: #f5f5f5; color: #000000;">=</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">{{warningdata|getArgName:i}}&amp;nbsp;超出阀值&amp;nbsp;&amp;nbsp;阀值：{{guestSetArgs|getArgQxlValue:j}}&amp;nbsp;&amp;nbsp;检测值：{{warningdata|getArgQxlValue:j}}&lt;br&gt;</span><span style="background-color: #f5f5f5; color: #000000;">"</span><span style="background-color: #f5f5f5; color: #000000;">
           document.write(setArgStr);
       }
       
    {</span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;"> endfor </span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;">} 
  {</span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;"> endfor </span><span style="background-color: #f5f5f5; color: #000000;">%</span><span style="background-color: #f5f5f5; color: #000000;">} 
  
    </span><span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">script</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">body</span><span style="color: #0000ff;">&gt;</span>
<span style="color: #0000ff;">&lt;/</span><span style="color: #800000;">html</span><span style="color: #0000ff;">&gt;</span></pre>
</div>
<p>形如{{warningdata|getArgQxlValue:j}}，就可以获取到里面的值了</p>
<p><img src="./images/JavaScript获取Django模板中指定键值的数据，使用过滤器0.png" alt="" /></p>
<p>&nbsp;稍做美化</p>
<p><img src="./images/JavaScript获取Django模板中指定键值的数据，使用过滤器1.png" alt="" /></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>参考自https://docs.djangoproject.com/en/2.2/howto/custom-template-tags/</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>