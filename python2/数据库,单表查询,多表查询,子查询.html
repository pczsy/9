<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修数据库,单表查询,多表查询,子查询' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>数据库,单表查询,多表查询,子查询</center></div><div class='banquan'>原文出处:本文由博客园博主小小咸鱼YwY提供。<br/>
原文连接:https://www.cnblogs.com/pythonywy/p/11196859.html</div><br>
    <h1 id="自我总结">07.16自我总结</h1>
<h1 id="数据库查找方式进阶">数据库查找方式进阶</h1>
<h2 id="一.单表查询">一.单表查询</h2>
<h3 id="查看表单选择段落">1.查看表单选择段落</h3>
<h4 id="disinct">1.disinct</h4>
<ul>
<li>所有内容去重:select disinct * from 表名称;</li>
<li>指定字段去重:select disinct 字段 from 表名称;</li>
</ul>
<h4 id="注意点"><strong>注意点</strong></h4>
<ul>
<li>disinct 必须写在开头</li>
</ul>
<h4 id="查看多个字段内容">2.查看多个字段内容</h4>
<ul>
<li>查看多个字段内容:select 字段一,字段2 from 表名称;</li>
<li>查看全部以及字段内容:select * 字段1 from 表名称;</li>
</ul>
<p>注意点</p>
<ul>
<li>有*和字段的时候,*必须写在字段的前面</li>
</ul>
<h4 id="对于查看段落横坐标进行重命名显示">3.对于查看段落横坐标进行重命名显示</h4>
<ul>
<li>select 字段名称 as 显示字段名称 from 表名称;</li>
<li>select 字段名称 显示字段名称 from 表名称</li>
</ul>
<h4 id="选择指定表指定段落">4.选择指定表指定段落</h4>
<p>select 指定表.字段 from 表1,表2</p>
<h4 id="四则运算">5.四则运算</h4>
<p>四则运算包括加减乘除</p>
<p>select 字段1 四则运行符号 字段2 from 表名称</p>
<h4 id="函数运算">6.函数运算</h4>
<p>语法:select 函数(字段1) from 表名称</p>
<p>统计函数</p>
<ul>
<li>max:最大值</li>
<li>min:最小值</li>
<li>avg:平均值</li>
<li>sum:求和</li>
<li>count:数量</li>
</ul>
<h3 id="where">2.where</h3>
<h4 id="常见的表达式">1.常见的表达式</h4>
<table>
<thead>
<tr class="header">
<th style="text-align: center;">比较运算符</th>
<th style="text-align: center;">介绍</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;">&lt;,&lt;=,&gt;,&gt;=,=,!=</td>
<td style="text-align: center;">小于,小于等于,大于,大于等于,等于,不等于</td>
</tr>
<tr class="even">
<td style="text-align: center;">in(set)</td>
<td style="text-align: center;">成员运算,看值有没有再列表里面</td>
</tr>
<tr class="odd">
<td style="text-align: center;">like</td>
<td style="text-align: center;">模糊查找:%代表零个或多个字符,_代表一个字符</td>
</tr>
<tr class="even">
<td style="text-align: center;">is null</td>
<td style="text-align: center;">判断是否为空</td>
</tr>
<tr class="odd">
<td style="text-align: center;">between A and B</td>
<td style="text-align: center;">显示某个区间:A-B 包括A和B</td>
</tr>
<tr class="even">
<td style="text-align: center;">逻辑运算符</td>
<td style="text-align: center;">介绍</td>
</tr>
<tr class="odd">
<td style="text-align: center;">and</td>
<td style="text-align: center;">且,多个条件同时满足</td>
</tr>
<tr class="even">
<td style="text-align: center;">or</td>
<td style="text-align: center;">或者,满足多个条件其中一条</td>
</tr>
<tr class="odd">
<td style="text-align: center;">not</td>
<td style="text-align: center;">不成立</td>
</tr>
</tbody>
</table>
<h4 id="特殊的表达式">2.特殊的表达式</h4>
<p><strong>binary</strong></p>
<p>区分大小写</p>
<p>语法:select 段落 from 表明 where binary 字段....................................</p>
<h3 id="group-byhaving">3.group by/having</h3>
<p>分组</p>
<p>语法</p>
<p>select....from 表名</p>
<p>where .......</p>
<p>group by 字段名称 #如果这里有多个字段,A,B,用,连接表示具有相同字段A以及相同字段B进行分组</p>
<p>having 判断内容</p>
<p><strong>注意</strong>:</p>
<ul>
<li>having 必须分组后才能使用</li>
<li>分组后只能用having</li>
<li>group_concat(字段),可以把由于分组后造成的折叠内的数据全部显示</li>
</ul>
<h3 id="ord-by">4.ord by</h3>
<p>排序</p>
<p>语法:默认为升序</p>
<p>ord by 字段名称</p>
<p>固定升序或者降序</p>
<ul>
<li>升序 :ord by 字段名称 asc</li>
<li>降序:ord by 字段名称 desc</li>
</ul>
<p>多个条件排序主次关系</p>
<p>ord by 主字段,次字段</p>
<h3 id="limit">5.limit</h3>
<p>限制显示记录</p>
<p>对于单页表操作</p>
<p>limit start count</p>
<ul>
<li>其中start可以不填,不填默认从0开始,0是第一天记录</li>
<li>start表示起始位置,count 表示记录的数量</li>
</ul>
<p>对于多页操作</p>
<p>分页原理:先查询总数据条数 设为a<br />
确定每页数量b<br />
总页数为c = a / b 如果除不尽则需要加1 例如 10 / 3 正确页数为4<br />
查询语句的起始位置为s = 当前页数d 减去1 乘以每页数量<br />
即 s = (d - 1) * b</p>
<p>limit s b</p>
<h3 id="正则匹配">6.正则匹配</h3>
<p>语法 :where 字段名称 regexp '正则表达式'</p>
<p>注意:正则表达式不包括特殊字符如\w</p>
<h2 id="二.多表查询">二.多表查询</h2>
<h3 id="笛卡尔积查询">1.笛卡尔积查询</h3>
<p>语法:select *from 表1,表2</p>
<p>他会把多个表每行与另外个表统统匹配上,其中会有一些脏数据,我们可以用里面值的关系进行连接</p>
<h3 id="内连接查询">2.内连接查询</h3>
<p>其本质就是笛卡尔积查询</p>
<p>区别是把,变成 join</p>
<p>且不能用where,要先用on根据里面值的关系拼接好了再用 where</p>
<h3 id="左连接查询">3.左连接查询</h3>
<p>左表中记录的无论是否有匹配关系都全部显示，右表中仅显示匹配成功的记录</p>
<p>语法:select *from 表1 left join,表2</p>
<h3 id="右连接查询">4.右连接查询</h3>
<p>右表中记录的无论是否有匹配关系都全部显示，左表中仅显示匹配成功的记录</p>
<p>语法:select *from 表1 right join 表2</p>
<h3 id="全外连接查询">5.全外连接查询</h3>
<p>无论是否匹配成功，两边表中的记录都要全部显示<br />
select *from 表1 full join 表2</p>
<p>注意:mysql 不支持</p>
<p>我们要引入union</p>
<p>union 只能用于字段数量相同的两个表 会自动去除重复的记录</p>
<p>union all 则保留所有记录</p>
<p>select <em>from dept left join emp on dept.id=emp.dept_id<br />
union<br />
select </em>from dept right join emp on dept.id=emp.dept_id;</p>
<p>可以完成全外连接</p>
<h3 id="注意">6.注意</h3>
<p>在三表以及三表以上查询的时候,表1 join 表2 join 表三,其意思是表1与表2连接后的表再与表3进行连接</p>
<p>如果三表连接时候没有用join而是用<code>,</code>进行连接表示同时查询3个表</p>
<h2 id="三.子查询">三.子查询</h2>
<h3 id="查询对象当查找对象">1.查询对象当查找对象</h3>
<p>将查找后的内容作为查找的值或者查找的对象,</p>
<p>如果要作为一个表当作查找对象,要对于查找后的表进行重命名语法如下</p>
<p>select .... from (select ....from .......) as 新名字</p>
<h3 id="in关键字查询">2.in关键字查询</h3>
<pre><code><code>&quot;查询平均年龄大于25的部门名称
子查询方式:
平均年龄大于25的部门id有哪些?
先要求出每个部门的平年龄! 筛选出平均年龄大于25的部门id
拿着部门id 去查询部门表查询&quot;

select name from dept where id in  (select dept_id from emp group by dept_id having avg(age) &gt; 25);


&quot;多表查询方式:
先把数据拼接到一起 在加以筛选&quot;

select dept.name from emp inner join dept
on emp.dept_id = dept.id 
group by dept.name
having avg(age) &gt;25;</code></pre>
<h3 id="exists关键字查询">3.exists关键字查询</h3>
<p>xists 后跟子查询 子查询有结果是为True 没有结果时为False</p>
<p>为true时外层执行 为false外层不执行</p>
<pre><code><code>select *from emp where exists (select *from emp where salary &gt; 1000);
#查看exists 的返回结果: 只有 0 和 1


select (exists (select *from emp where salary &gt; 10000));

#一个查询结果也是一个表 既然是表就能链接起来
#综合练习:
&quot;查询每个部门工资最高的员工信息
先查询每个部门的最高工资
将查询结果与员工表联合起来
在加条件判断部门id相同并且 最高工资相同 则显示&quot;

select *from emp  inner join  
(select dept_id,max(salary) m from emp group by dept_id)  t2
on emp.dept_id = t2.dept_id 
where
emp.salary = t2.m; </code></pre>

</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>