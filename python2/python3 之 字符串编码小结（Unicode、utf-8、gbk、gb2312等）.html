<html><head><meta charset='utf-8'><meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='applicable-device' content='pc'><meta name='keywords' content='电脑,电脑讲解,电脑技术,编程,电脑故障维修python3 之 字符串编码小结（Unicode、utf-8、gbk、gb2312等）' />
<script src='../../highlight/highlight.pack.js'></script>
<link rel='stylesheet' type='text/css' href='../../highlight/styles/monokai.css'/>

<link rel='stylesheet' href='../../fenxiang/dist/css/share.min.css'>
<script src='../../fenxiang/src/js/social-share.js'></script>
<script src='../../fenxiang/src/js/qrcode.js'></script>

</head><body><script>hljs.initHighlightingOnLoad();</script><script>
var system ={};  
var p = navigator.platform;       
system.win = p.indexOf('Win') == 0;  
system.mac = p.indexOf('Mac') == 0;  
system.x11 = (p == 'X11') || (p.indexOf('Linux') == 0);     
if(system.win||system.mac||system.xll){
document.write("<link href='../css/3.css' rel='stylesheet' type='text/css'>");}else{ document.write("<link href='../css/3wap.css' rel='stylesheet' type='text/css'>");}</script><script src='../../js/3.js'></script><div class='div2'><div class='heading_nav'><ul><div><li><a href='../../index.html'>首页</a></li>
</div><div onclick='hidden1()' >分享</div>
</ul></div></div>
<div id='heading_nav2'> 
<li class='row' >
<div class='social-share' data-mode='prepend'><a href='javascript:' class='social-share-icon icon-heart'></a></div></li></div><script charset='utf-8' src='../../3/js/hengfu.js'></script><script charset='utf-8' src='../../3/js/hengfu2.js'></script><hr><div class='div1'><div class='biaoti'><center>python3 之 字符串编码小结（Unicode、utf-8、gbk、gb2312等）</center></div><div class='banquan'>原文出处:本文由博客园博主Be-myself提供。<br/>
原文连接:https://www.cnblogs.com/gengyufei/p/11344454.html</div><br>
    <p>python3 解释器默认编码为Unicode，由str类型进行表示。二进制数据使用byte类型表示。</p>
<p>字符串通过编<span style="color: #333300;">码转换成字节串，字</span>节码通过解码成为字符串。</p>
<p><span style="color: #ff0000;"><strong>encode：str--&gt;bytes</strong></span></p>
<p><span style="color: #ff0000;"><strong>decode：bytes --&gt; str</strong></span></p>
<p><span style="color: #000000;"><strong>下面给出一个实例：</strong></span></p>
<div class="cnblogs_code">
<pre><code><span style="color: #008080;"> 1</span> mystr = <span style="color: #800000;">'</span><span style="color: #800000;">人生苦短，我学Python</span><span style="color: #800000;">'</span>
<span style="color: #008080;"> 2</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">原始字符串mystr：</span><span style="color: #800000;">'</span>,mystr)      <span style="color: #008000;">#</span><span style="color: #008000;">原始字符串mystr： 人生苦短，我学Python</span>
<span style="color: #008080;"> 3</span> 
<span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span> <span style="color: #008000;">#</span><span style="color: #008000;">将字符串进行编码</span>
<span style="color: #008080;"> 6</span> mystr_to_utf8 = mystr.encode(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span>)<span style="color: #008000;">#</span><span style="color: #008000;">默认就是Unicode，不用再decode</span>
<span style="color: #008080;"> 7</span> mystr_to_gbk = mystr.encode(<span style="color: #800000;">'</span><span style="color: #800000;">gbk</span><span style="color: #800000;">'</span><span style="color: #000000;">)
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span> 
<span style="color: #008080;">10</span> <span style="color: #008000;">#</span><span style="color: #008000;">打印编码后的字节串（字面值）</span>
<span style="color: #008080;">11</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8编码后的字节串：</span><span style="color: #800000;">'</span><span style="color: #000000;">,mystr_to_utf8)
</span><span style="color: #008080;">12</span> <span style="color: #008000;">#</span><span style="color: #008000;">utf-8编码后的字节串： b'\xe4\xba\xba\xe7\x94\x9f\xe8\x8b\xa6\xe7\x9f\xad\xef\xbc\x8c\xe6\x88\x91\xe5\xad\xa6Python'</span>
<span style="color: #008080;">13</span> 
<span style="color: #008080;">14</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">gbk编码后的字节串：</span><span style="color: #800000;">'</span><span style="color: #000000;">,mystr_to_gbk)
</span><span style="color: #008080;">15</span> <span style="color: #008000;">#</span><span style="color: #008000;">gbk编码后的字节串： b'\xc8\xcb\xc9\xfa\xbf\xe0\xb6\xcc\xa3\xac\xce\xd2\xd1\xa7Python'</span>
<span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span> 
<span style="color: #008080;">18</span> <span style="color: #008000;">#</span><span style="color: #008000;">正确解码：</span>
<span style="color: #008080;">19</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8解码mystr_to_utf8：</span><span style="color: #800000;">'</span>,mystr_to_utf8.decode(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span>))    <span style="color: #008000;">#</span><span style="color: #008000;">utf-8解码mystr_to_utf8： 人生苦短，我学Python</span>
<span style="color: #008080;">20</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">gbk解码mystr_to_gbk：</span><span style="color: #800000;">'</span>,mystr_to_gbk.decode(<span style="color: #800000;">'</span><span style="color: #800000;">gbk</span><span style="color: #800000;">'</span>))          <span style="color: #008000;">#</span><span style="color: #008000;">gbk解码mystr_to_gbk： 人生苦短，我学Python</span>
<span style="color: #008080;">21</span> 
<span style="color: #008080;">22</span> 
<span style="color: #008080;">23</span> <span style="color: #008000;">#</span><span style="color: #008000;">错误解码示范：（会出现报错信息）</span>
<span style="color: #008080;">24</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">gbk解码mystr_to_utf8：</span><span style="color: #800000;">'</span>,mystr_to_utf8.decode(<span style="color: #800000;">'</span><span style="color: #800000;">gbk</span><span style="color: #800000;">'</span><span style="color: #000000;">))
</span><span style="color: #008080;">25</span> <span style="color: #008000;">#</span><span style="color: #008000;">UnicodeDecodeError: 'gbk' codec can't decode byte 0xa6 in position 20: illegal multibyte sequence</span>
<span style="color: #008080;">26</span> 
<span style="color: #008080;">27</span> <span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8解码mystr_to_gbk：</span><span style="color: #800000;">'</span>,mystr_to_gbk.decode(<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span>))</pre>
</div>
<p>&nbsp;分析：</p>
<p>　　1、python3 内部解释器默认编码为Unicode</p>
<p>　　2、encode:指明要使用的编码，decode:指明当前编码的编码格式</p>
<h1>题外篇：</h1>
<h2>1、什么是字符编码</h2>
<p>　　计算机想要工作必须通电，即用&lsquo;电&rsquo;驱使计算机干活，也就是说&lsquo;电&rsquo;的特性决定了计算机的特性。电的特性即高低电平(人类从逻辑上将二进制数1对应高电平,二进制数0对应低电平)，<span style="color: #000000;">关于磁盘的磁特性也是同样的道理。<span style="color: #ff0000;">结论：计算机只认识数字</span></span></p>
<p>很明显，我们平时在使用计算机时，用的都是人类能读懂的字符（用高级语言编程的结果也无非是在文件内写了一堆字符），如何能让计算机读懂人类的字符？必须经过一个过程：</p>
<pre><code>　　#字符--------（翻译过程）-------&gt;数字 

　　#这个过程实际就是一个字符如何对应一个特定数字的标准，这个标准称之为字符编码<br /><br /></pre>
<h2>&nbsp;2、字符编码的发展：三个阶段</h2>
<h3>　阶段一：</h3>
<pre><code>现代计算机起源于美国，最早诞生也是基于英文考虑的ASCII
ASCII:一个Bytes代表一个字符（英文字符/键盘上的所有其他字符），1Bytes=8bit，8bit可以表示0-2**8-1种变化，即可以表示256个字符
ASCII最初只用了后七位，127个数字，已经完全能够代表键盘上所有的字符了（英文字符/键盘的所有其他字符），后来为了将拉丁文也编码进了ASCII表，将最高位也占用了</pre>
<h3>　阶段二：</h3>
<pre><code>为了满足中文和英文，中国人定制了GBK
GBK:2Bytes代表一个中文字符，1Bytes表示一个英文字符
为了满足其他国家，各个国家纷纷定制了自己的编码
日本把日文编到Shift_JIS里，韩国把韩文编到Euc-kr里</pre>
<h3>　阶段三：</h3>
<pre><code>各国有各国的标准，就会不可避免地出现冲突，结果就是，在多语言混合的文本中，显示出来会有乱码。如何解决这个问题呢？？？

说白了乱码问题的本质就是不统一，如果我们能统一全世界，规定全世界只能使用一种文字符号，然后统一使用一种编码，那么乱码问题将不复存在，
ps：就像当年秦始皇统一中国一样，书同文车同轨，所有的麻烦事全部解决
很明显，上述的假设是不可能成立的。很多地方或老的系统、应用软件仍会采用各种各样的编码，这是历史遗留问题。于是我们必须找出一种解决方案或者说编码方案，需要同时满足：<br />
1、<span style="color: #ff0000;">能够兼容万国字符</span>
2、<span style="color: #ff0000;">与全世界所有的字符编码都有映射关系，这样就可以转换成任意国家的字符编码</span>

这就是unicode（定长），　统一用2Bytes代表一个字符，　虽然2**16-1=65535，但unicode却可以存放100w+个字符，因为unicode存放了与其他编码的映射关系，准确地说unicode并不是一种严格意义上的字符编码表，下载pdf来查看unicode的详情：
链接：https://pan.baidu.com/s/1dEV3RYp

很明显对于通篇都是英文的文本来说，unicode的式无疑是多了一倍的存储空间（二进制最终都是以电或者磁的方式存储到存储介质中的）

于是产生了UTF-8（可变长，全称Unicode Transformation Format），对英文字符只用1Bytes表示，对中文字符用3Bytes，对其他生僻字用更多的Bytes去存


<strong>小结</strong>：<span style="color: #ff0000;">内存中统一采用unicode，浪费空间来换取可以转换成任意编码（不乱码），硬盘可以采用各种编码，如utf-8，保证存放于硬盘或者基于网络传输的数据量很小，提高传输效率与稳定性。<br /></span></pre>
<h2>总结：</h2>
<pre><code>基于目前的现状，内存中的编码固定就是unicode，我们唯一可变的就是硬盘的上对应的字符编码。
此时你可能会觉得，那如果我们以后开发软时统一都用unicode编码，那么不就都统一了吗，关于统一这一点你的思路是没错的，但我们不可会使用unicode编码来编写程序的文件，因为在通篇都是英文的情况下，耗费的空间几乎会多出一倍，这样在软件读入内存或写入磁盘时，都会徒增IO次数，从而降低程序的执行效率。因而我们以后在编写程序的文件时应该统一使用一个更为精准的字符编码utf-8（用1Bytes存英文，3Bytes存中文），再次强调，内存中的编码固定使用unicode。
<br />1、在存入磁盘时，需要将unicode转成一种更为精准的格式，utf-8:全称Unicode Transformation Format，将数据量控制到最精简
2、在读入内存时，需要将utf-8转成unicode<br />
所以我们需要明确：<strong><span style="color: #ff0000;">内存中用unicode是为了兼容万国软件，即便是硬盘中有各国编码编写的软件，unicode也有相对应的映射关系，但在现在的开发中，程序员普遍使用utf-8编码了，估计在将来的某一天等所有老的软件都淘汰掉了情况下，就可以变成：内存utf-8&lt;-&gt;硬盘utf-8的形式了</span></strong>。</pre>
<pre><code><span style="color: #ff0000;">&nbsp;</span></pre>
<p>　　</p>
<p>&nbsp;</p>
</div>
</div><hr><script charset='utf-8' src='../../js/sming.js'></script></body></html>